<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDSANABRIACF - Club Deportivo Sanabriacf</title>
    <script src="database.js"></script>
    <link rel="icon" type="image/x-icon" href="escudo-sanabria.jpeg">
    <link rel="shortcut icon" type="image/x-icon" href="escudo-sanabria.jpeg">
    <link rel="apple-touch-icon" href="escudo-sanabria.jpeg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #dc2626; /* Rojo fijo */
            --secondary-color: #3b82f6; /* Azul fijo */
            --text-color: #1f2937;
            --text-light-color: #6b7280;
            --button-color: #dc2626; /* Rojo fijo */
            --button-hover-color: #b91c1c;
            --background-color: #ffffff;
            --card-background-color: #f8fafc;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .team-info {
            background: var(--card-background-color);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 40px;
        }

        .team-logo {
            width: 150px;
            height: 150px;
            background: #e5e7eb;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--primary-color);
            border: 4px solid var(--secondary-color);
            overflow: hidden;
        }

        .team-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .logo-message {
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .feature-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .feature-description {
            color: var(--text-light-color);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .feature-button {
            background: var(--button-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
        }

        .feature-button:hover {
            background: var(--button-hover-color);
        }

        .cta-section {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .cta-button {
            background: var(--button-color);
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            margin: 10px;
            border: none;
            cursor: pointer;
            display: inline-block;
        }

        .cta-button:hover {
            background: var(--button-hover-color);
        }

        /* Secci√≥n de Encuentros */
        .encuentros-section {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: none;
        }

        .encuentros-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .encuentro-card {
            background: var(--card-background-color);
            padding: 25px;
            border-radius: 12px;
            border-left: 5px solid var(--primary-color);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .encuentro-teams {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .encuentro-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .encuentro-info-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .encuentro-placeholder {
            text-align: center;
            padding: 40px;
            color: var(--text-light-color);
            grid-column: 1 / -1;
        }

        .admin-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .admin-modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .admin-modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: var(--card-background-color);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .feature-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .feature-description {
            color: var(--text-light-color);
            line-height: 1.6;
        }

        .cta-section {
            text-align: center;
            background: var(--background-color);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            transition: transform 0.3s ease;
            margin: 10px;
        }

        .cta-button:hover {
            transform: scale(1.05);
        }

        .download-section {
            margin-top: 30px;
        }

        .download-button {
            background: var(--button-color);
            margin: 5px;
        }

        .download-button:hover {
            background: var(--button-hover-color);
        }

        footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            opacity: 0.8;
        }

        .admin-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .admin-button:hover {
            background: #b91c1c;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .coach-access-button {
            background: #059669;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .coach-access-button:hover {
            background: #047857;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* Estilos para el carrusel de publicidad */
        .ad-carousel {
            margin: 20px auto;
            max-width: 800px;
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .carousel-container {
            position: relative;
            width: 100%;
            height: 300px;
        }

        .carousel-slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
            height: 100%;
        }

        .carousel-slide {
            min-width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            cursor: pointer;
        }

        .carousel-slide img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        .carousel-slide-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px;
            text-align: center;
        }

        .carousel-slide-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .carousel-slide-company {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Estilos para el carrusel de publicidad del club */
        .publicidad-carrusel {
            position: relative;
            width: 100%;
            height: 400px;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .carrusel-slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
            height: 100%;
        }

        .carrusel-slide {
            min-width: 100%;
            height: 100%;
            position: relative;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carrusel-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .carrusel-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: white;
            padding: 20px;
            text-align: center;
        }

        .carrusel-controls {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 10;
        }

        .carrusel-btn {
            background: rgba(255,255,255,0.8);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carrusel-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .carrusel-dots {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .carrusel-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carrusel-dot.active {
            background: white;
        }

        /* Estilos para publicidad fija */
        .publicidad-fija {
            width: 100%;
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
        }

        .publicidad-fija img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Estilos para banner horizontal */
        .publicidad-banner {
            width: 100%;
            height: 120px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
        }

        .publicidad-banner img {
            height: 100%;
            width: auto;
            margin-right: 20px;
            border-radius: 8px;
        }
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 1.2rem;
            border-radius: 50%;
            transition: background 0.3s ease;
            z-index: 10;
        }

        .carousel-btn:hover {
            background: rgba(0,0,0,0.8);
        }

        .carousel-btn.prev {
            left: 10px;
        }

        .carousel-btn.next {
            right: 10px;
        }

        .carousel-dots {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .carousel-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .carousel-dot.active {
            background: white;
        }

        @media (max-width: 768px) {
            .ad-carousel {
                margin: 15px;
                max-width: none;
            }
            
            .carousel-container {
                height: 200px;
            }
            
            .carousel-slide-title {
                font-size: 1rem;
            }
            
            .carousel-slide-company {
                font-size: 0.8rem;
            }
        }



        .multimedia-section {
            background: var(--card-background-color);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 40px;
            text-align: center;
        }

        .multimedia-section h2 {
            color: var(--text-color);
            margin-bottom: 30px;
            font-size: 2rem;
        }

        .multimedia-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .gallery-item {
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            background: white;
            transition: transform 0.3s ease;
        }

        .gallery-item:hover {
            transform: translateY(-5px);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .gallery-item video {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .gallery-item-info {
            padding: 15px;
        }

        .gallery-item-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--text-color);
        }

        .gallery-item-type {
            font-size: 14px;
            color: var(--text-light-color);
        }

        .access-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }



        /* Estilos para los modales de registro */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }

        .close:hover {
            color: #000;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--text-color);
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="tel"],
        .form-group input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }

        .form-group input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .form-group input[type="checkbox"] {
            margin-right: 10px;
        }

        .form-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            flex: 1;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            flex: 1;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 10px;
            }
        }

        /* Estilos para el modal de login din√°mico */
        #loginModal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #loginModal .modal-content {
            background-color: white;
            margin: auto;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 350px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        #loginModal .btn-primary,
        #loginModal .btn-secondary {
            padding: 6px 12px;
            font-size: 12px;
        }
    </style>
</head>
<body>


    <div class="container">
        <header>
            <h1>‚öΩ CDSANABRIACF</h1>
            <p class="subtitle">Club Deportivo Sanabriacf - Pasi√≥n por el F√∫tbol</p>
            
            <!-- Botones de acceso en la parte superior -->
            <div class="access-buttons" style="margin-top: 20px; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                <button class="access-btn" onclick="showLoginModal(createSocioLoginForm())" style="background: var(--primary-color); color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                    üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Socios/as
                </button>
                <button class="access-btn" onclick="abrirTiendaOnline()" style="background: linear-gradient(135deg, #dc2626, #3b82f6); color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                    üè™ TIENDA
                </button>
                <button class="access-btn" onclick="showLoginModal(createAmigoLoginForm())" style="background: var(--secondary-color); color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                    ü§ù Amigos/as del Club
                </button>
            </div>
        </header>

        <!-- Carrusel de Publicidad -->
        <div id="adCarousel" class="ad-carousel" style="display: none;">
            <div class="carousel-container">
                <div class="carousel-slides" id="carouselSlides">
                    <!-- Los slides se cargar√°n din√°micamente -->
                </div>
                <button class="carousel-btn prev" onclick="changeSlide(-1)">‚ùÆ</button>
                <button class="carousel-btn next" onclick="changeSlide(1)">‚ùØ</button>
                <div class="carousel-dots" id="carouselDots">
                    <!-- Los puntos se generar√°n din√°micamente -->
                </div>
            </div>
        </div>

        <!-- Indicador del d√≠a actual -->
        <div class="current-day-banner" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 12px; text-align: center; font-size: 0.9rem; border-radius: 10px; margin-bottom: 20px;">
            <span id="currentDayDisplay">üìÖ Cargando fecha actual...</span>
            <span id="currentTimeDisplay" style="margin-left: 15px; opacity: 0.9;">‚è∞ Cargando hora...</span>
        </div>

        <div class="team-info">
            <div class="team-logo">
                üèÜ
            </div>
            <div class="logo-message" id="logoMessage">
                <!-- Mensaje debajo del logo se cargar√° aqu√≠ -->
            </div>
            <h2>Bienvenidos al Club Deportivo Sanabriacf</h2>
            <p>Un equipo con tradici√≥n, pasi√≥n y compromiso con el f√∫tbol. Formamos parte de la familia TURISTEAM.</p>
        </div>

        <div class="features">
            <div class="feature-card" onclick="openFeature('equipos')" style="cursor: pointer;">
                <div class="feature-icon">‚öΩ</div>
                <h3 class="feature-title">Nuestro Equipo</h3>
                <p class="feature-description">
                    Conoce a nuestros jugadores/as, entrenadores/as y personal t√©cnico. 
                    Un equipo unido con un objetivo com√∫n: la excelencia deportiva.
                </p>
                <button class="feature-btn" style="background: var(--primary-color); color: white; border: none; padding: 8px 16px; border-radius: 20px; margin-top: 15px; cursor: pointer;">Ver Equipos</button>
            </div>

            <div class="feature-card" onclick="openFeature('calendario')" style="cursor: pointer;">
                <div class="feature-icon">üìÖ</div>
                <h3 class="feature-title">Partidos y Calendario</h3>
                <p class="feature-description">
                    Consulta nuestro calendario de partidos y entrenamientos. 
                    Mantente al d√≠a con todas las actividades del club.
                </p>
                <button class="feature-btn" style="background: var(--primary-color); color: white; border: none; padding: 8px 16px; border-radius: 20px; margin-top: 15px; cursor: pointer;">Ver Calendario</button>
            </div>

            <div class="feature-card" onclick="openFeature('eventos')" style="cursor: pointer;">
                <div class="feature-icon">üéâ</div>
                <h3 class="feature-title">Eventos del Club</h3>
                <p class="feature-description">
                    Participa en eventos, torneos y actividades especiales. 
                    Mantente informado de todas las actividades del club.
                </p>
                <button class="feature-btn" style="background: var(--primary-color); color: white; border: none; padding: 8px 16px; border-radius: 20px; margin-top: 15px; cursor: pointer;">Ver Eventos</button>
            </div>

            <div class="feature-card" onclick="openFeature('competiciones')" style="cursor: pointer;">
                <div class="feature-icon">üèÜ</div>
                <h3 class="feature-title">Competiciones</h3>
                <p class="feature-description">
                    Participamos en ligas, torneos y competiciones. 
                    Gesti√≥n de clasificaciones y resultados del club.
                </p>
                <button class="feature-btn" style="background: var(--primary-color); color: white; border: none; padding: 8px 16px; border-radius: 20px; margin-top: 15px; cursor: pointer;">Ver Competiciones</button>
            </div>

            <div class="feature-card" onclick="openFeature('multimedia')" style="cursor: pointer;">
                <div class="feature-icon">üì∏</div>
                <h3 class="feature-title">Galer√≠a Multimedia</h3>
                <p class="feature-description">
                    Fotos, videos y documentos del club. 
                    Revive los mejores momentos del equipo.
                </p>
                <button class="feature-btn" style="background: var(--primary-color); color: white; border: none; padding: 8px 16px; border-radius: 20px; margin-top: 15px; cursor: pointer;">Ver Galer√≠a</button>
            </div>

            <div class="feature-card" onclick="openFeature('encuentros')" style="cursor: pointer;">
                <div class="feature-icon">‚öΩ</div>
                <h3 class="feature-title">Encuentros</h3>
                <p class="feature-description">
                    Consulta los partidos de esta semana. 
                    Categor√≠a, d√≠a, hora y campo de juego.
                </p>
                <button class="feature-btn" style="background: var(--primary-color); color: white; border: none; padding: 8px 16px; border-radius: 20px; margin-top: 15px; cursor: pointer;">Ver Encuentros</button>
            </div>

            <div class="feature-card" onclick="openFeature('documentos')" style="cursor: pointer; grid-column: 1 / -1; max-width: 400px; margin: 0 auto;">
                <div class="feature-icon">üìÑ</div>
                <h3 class="feature-title">Documentos del Club</h3>
                <p class="feature-description">
                    Consulta y descarga los documentos oficiales del club. 
                    Reglamentos, normativas y formularios.
                </p>
                <button class="feature-btn" style="background: var(--primary-color); color: white; border: none; padding: 8px 16px; border-radius: 20px; margin-top: 15px; cursor: pointer;">Ver Documentos</button>
            </div>
        </div>

        <!-- Secci√≥n de Pr√≥ximos Encuentros -->
        <div id="encuentros" class="encuentros-section">
            <h2>‚öΩ Pr√≥ximos Encuentros</h2>
            <p>Consulta los pr√≥ximos partidos de todos nuestros equipos</p>
            
            <div id="listaEncuentros" class="encuentros-grid">
                <div class="encuentro-placeholder">
                    <p>No hay encuentros programados en este momento</p>
                    <p>Los administradores pueden a√±adir encuentros desde el panel de administraci√≥n</p>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button onclick="cerrarEncuentros()" class="cta-button">
                    ‚Üê Volver
                </button>
            </div>
        </div>

        <div class="cta-section">
            <h2>¬°√önete a CDSANABRIACF!</h2>
            <p>Accede a todas las funcionalidades de gesti√≥n futbol√≠stica</p>
            
            <div class="download-section">
                <button class="cta-button" onclick="document.getElementById('sociosModal').style.display = 'block'">
                    üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Hacerse Socio
                </button>
                <button class="cta-button" onclick="document.getElementById('amigosModal').style.display = 'block'">
                    ü§ù Ser Amigo del Club
                </button>
            </div>
            
            <!-- Botones de Redes Sociales -->
            <div class="social-media-section" style="margin-top: 20px; text-align: center;">
                <h3 style="color: white; margin-bottom: 15px; font-size: 1.2rem;">üì± S√≠guenos en Redes Sociales</h3>
                <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                    <button class="cta-button" onclick="openFacebook()" style="background: #1877f2; border: none; padding: 12px 24px; border-radius: 25px; color: white; cursor: pointer; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.3s ease; min-width: 140px;">
                        üìò Facebook
                    </button>
                    <button class="cta-button" onclick="openInstagram()" style="background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%); border: none; padding: 12px 24px; border-radius: 25px; color: white; cursor: pointer; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.3s ease; min-width: 140px;">
                        üì∑ Instagram
                    </button>
                </div>
            </div>
            

        </div>

        <!-- Secci√≥n de Publicidad -->
        <div class="multimedia-section">
            <h2>üì¢ Publicidad del Club</h2>
            <div id="publicidadGallery" class="multimedia-gallery">
                <p>Cargando publicidad...</p>
            </div>
        </div>

        <!-- Modal de Registro de Socios -->
        <div id="sociosModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeSociosModal()">&times;</span>
                <h2>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Registro de Socio</h2>
                <p style="color: #dc2626; font-weight: bold; margin-bottom: 20px;">‚ö†Ô∏è IMPORTANTE: Los socios deben pagar una cuota. Si no se valida el pago en 7 d√≠as, ser√°s excluido hasta el pago.</p>
                
                <form id="sociosForm" onsubmit="registerSocio(event)">
                    <div class="form-group">
                        <label for="socioNombre">Nombre *</label>
                        <input type="text" id="socioNombre" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="socioApellidos">Apellidos *</label>
                        <input type="text" id="socioApellidos" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="socioFechaNacimiento">Fecha de Nacimiento *</label>
                        <input type="date" id="socioFechaNacimiento" required onchange="actualizarCuotaSocioPorEdad()">
                        <small id="socioEdadInfo" style="display:block; color:#6b7280; margin-top:6px;">Edad: -</small>
                    </div>

                    <div class="form-group">
                        <label for="socioDNI">DNI *</label>
                        <input type="text" id="socioDNI" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="socioDireccion">Direcci√≥n *</label>
                        <input type="text" id="socioDireccion" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="socioTelefono">Tel√©fono *</label>
                        <input type="tel" id="socioTelefono" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="socioEmail">Correo Electr√≥nico *</label>
                        <input type="email" id="socioEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="socioCuota">Cuota de Socio (‚Ç¨)</label>
                        <input type="number" id="socioCuota" value="20" min="0" step="0.01" readonly>
                        <div style="display:flex; gap:14px; align-items:center; margin-top:6px; flex-wrap:wrap;">
                            <label style="display:inline-flex; align-items:center; gap:6px;">
                                <input type="radio" name="socioCuotaRadio" value="20" checked onchange="seleccionarCuotaManual(20)">
                                <span style="font-weight:700; color:#dc2626;">Cuota: 20 ‚Ç¨ (Adulto)</span>
                            </label>
                            <label style="display:inline-flex; align-items:center; gap:6px;">
                                <input type="radio" name="socioCuotaRadio" value="10" onchange="seleccionarCuotaManual(10)">
                                <span style="font-weight:700; color:#dc2626;">Cuota: 10 ‚Ç¨ (Menor)</span>
                            </label>
                        </div>
                        <small style="display:block; color:#6b7280; margin-top:6px;">Adulto (‚â•18): 20 ‚Ç¨ ¬∑ Menor (‚â§17): 10 ‚Ç¨</small>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="socioConsentimiento" required>
                            Acepto las condiciones y el pago de la cuota *
                        </label>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" class="btn-primary">Registrarse como Socio</button>
                        <button type="button" class="btn-secondary" onclick="closeSociosModal()">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal de Registro de Amigos -->
        <div id="amigosModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeAmigosModal()">&times;</span>
                <h2>ü§ù Registro de Amigo del Club</h2>
                <p style="color: #059669; font-weight: bold; margin-bottom: 20px;">‚úÖ GRATUITO: El registro como amigo del club es completamente gratuito.</p>
                
                <form id="amigosForm" onsubmit="registerAmigo(event)">
                    <div class="form-group">
                        <label for="amigoNombre">Nombre *</label>
                        <input type="text" id="amigoNombre" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="amigoApellidos">Apellidos *</label>
                        <input type="text" id="amigoApellidos" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="amigoDNI">DNI *</label>
                        <input type="text" id="amigoDNI" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="amigoTelefono">Tel√©fono *</label>
                        <input type="tel" id="amigoTelefono" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="amigoEmail">Correo Electr√≥nico *</label>
                        <input type="email" id="amigoEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="amigoConsentimiento" required>
                            Acepto las condiciones del club *
                        </label>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" class="btn-primary">Registrarse como Amigo</button>
                        <button type="button" class="btn-secondary" onclick="closeAmigosModal()">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal de Administraci√≥n -->
        <div id="adminModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeAdminModal()">&times;</span>
                <h2 style="color: var(--primary-color); margin-bottom: 20px; text-align: center;">üîß Acceso Administraci√≥n</h2>
                <p style="color: #059669; font-weight: bold; margin-bottom: 20px; text-align: center;">‚úÖ Introduce tus credenciales de administrador</p>
                <form id="adminForm" onsubmit="validateAdmin(event)">
                    <div class="form-group">
                        <label for="adminEmail">Email de Administrador *</label>
                        <input type="email" id="adminEmail" placeholder="ejemplo@cdsanabriacf.com" required>
                    </div>
                    <div class="form-group">
                        <label for="adminPassword">Contrase√±a *</label>
                        <input type="password" id="adminPassword" placeholder="Tu contrase√±a" required>
                    </div>
                    <div id="adminMessage" style="display: none; padding: 10px; margin: 10px 0; border-radius: 5px; text-align: center; font-weight: bold;"></div>
                    <div class="form-buttons">
                        <button type="submit" class="btn-primary">üîê Acceder</button>
                        <button type="button" class="btn-secondary" onclick="closeAdminModal()">‚ùå Cancelar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Datos de Contacto -->
        <div class="contact-section" style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-top: 40px;">
            <h2 style="color: var(--text-color); margin-bottom: 20px; text-align: center;">üìû Datos de Contacto</h2>
            <div id="contactInfo" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; text-align: center;">
                <div>
                    <h4 style="color: var(--text-color); margin-bottom: 10px;">üìß Email</h4>
                    <p id="contactEmail" style="color: var(--text-light-color);">cdsanabriafc@gmail.com</p>
                </div>
                <div>
                    <h4 style="color: var(--text-color); margin-bottom: 10px;">üì± Tel√©fono</h4>
                    <p id="contactPhone" style="color: var(--text-light-color);">+34 600 000 000</p>
                </div>
                <div>
                    <h4 style="color: var(--text-color); margin-bottom: 10px;">üìç Direcci√≥n</h4>
                    <p id="contactAddress" style="color: var(--text-light-color);">Crta. de El Pinar, s/n, 49300 Puebla de Sanabria, Zamora</p>
                </div>
                <div>
                    <h4 style="color: var(--text-color); margin-bottom: 10px;">üåê Sitio Web</h4>
                    <p id="contactWebsite" style="color: var(--text-light-color);">www.cdsanabriacf.com</p>
                </div>
                <div>
                    <h4 style="color: var(--text-color); margin-bottom: 10px;">üì± WhatsApp</h4>
                    <p id="contactWhatsApp" style="color: var(--text-light-color);">+34 600 000 000</p>
                </div>
                <div>
                    <h4 style="color: var(--text-color); margin-bottom: 10px;">‚è∞ Horarios</h4>
                    <p id="contactHours" style="color: var(--text-light-color);">Lunes a Viernes: 9:00 - 18:00</p>
                </div>
                <div>
                    <h4 style="color: var(--text-color); margin-bottom: 10px;">üè¢ CIF</h4>
                    <p id="contactCIF" style="color: var(--text-light-color);">G49115413</p>
                </div>
            </div>
        </div>

        <!-- Pol√≠tica de Protecci√≥n de Datos -->
        <div class="privacy-section" style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-top: 20px;">
            <h2 style="color: var(--text-color); margin-bottom: 20px; text-align: center; cursor: pointer;" onclick="togglePrivacyPolicy()">
                üîí Pol√≠tica de Protecci√≥n de Datos <span id="privacyToggle" style="font-size: 1.2rem;">‚ñº</span>
            </h2>
            <div id="privacyContent" style="display: none; color: var(--text-light-color); line-height: 1.6;">
                <h3 style="color: var(--text-color); margin-bottom: 15px;">Informaci√≥n sobre Protecci√≥n de Datos</h3>
                
                <h4 style="color: var(--text-color); margin-top: 20px; margin-bottom: 10px;">Responsable del Tratamiento</h4>
                <p>Club Deportivo Sanabriacf (CDSANABRIACF)<br>
                Direcci√≥n: [Direcci√≥n del club]<br>
                Email: cdsanabriafc@gmail.com<br>
                Tel√©fono: +34 600 000 000</p>

                <h4 style="color: var(--text-color); margin-top: 20px; margin-bottom: 10px;">Finalidad del Tratamiento</h4>
                <p>Sus datos personales ser√°n tratados para las siguientes finalidades:</p>
                <ul style="margin-left: 20px; margin-bottom: 15px;">
                    <li>Gesti√≥n de la relaci√≥n con socios, jugadores y amigos del club</li>
                    <li>Organizaci√≥n de eventos y actividades deportivas</li>
                    <li>Comunicaciones relacionadas con el club</li>
                    <li>Gesti√≥n administrativa y contable</li>
                </ul>

                <h4 style="color: var(--text-color); margin-top: 20px; margin-bottom: 10px;">Legitimaci√≥n</h4>
                <p>El tratamiento de sus datos se basa en:</p>
                <ul style="margin-left: 20px; margin-bottom: 15px;">
                    <li>Consentimiento del interesado</li>
                    <li>Ejecuci√≥n de un contrato</li>
                    <li>Inter√©s leg√≠timo del responsable</li>
                </ul>

                <h4 style="color: var(--text-color); margin-top: 20px; margin-bottom: 10px;">Conservaci√≥n de Datos</h4>
                <p>Los datos se conservar√°n mientras se mantenga la relaci√≥n con el club y no se solicite su supresi√≥n, y en su caso, durante los a√±os necesarios para cumplir con las obligaciones legales.</p>

                <h4 style="color: var(--text-color); margin-top: 20px; margin-bottom: 10px;">Destinatarios</h4>
                <p>Sus datos no ser√°n cedidos a terceros salvo obligaci√≥n legal o cuando sea necesario para la prestaci√≥n de los servicios solicitados.</p>

                <h4 style="color: var(--text-color); margin-top: 20px; margin-bottom: 10px;">Derechos</h4>
                <p>Puede ejercer sus derechos de acceso, rectificaci√≥n, supresi√≥n, limitaci√≥n, portabilidad y oposici√≥n contactando con nosotros en cdsanabriafc@gmail.com</p>

                <h4 style="color: var(--text-color); margin-top: 20px; margin-bottom: 10px;">Autoridad de Control</h4>
                <p>Puede presentar una reclamaci√≥n ante la Agencia Espa√±ola de Protecci√≥n de Datos (AEPD) si considera que el tratamiento no se ajusta a la normativa vigente.</p>

                <p style="margin-top: 20px; font-style: italic; color: var(--text-color);">
                    √öltima actualizaci√≥n: Diciembre 2024
                </p>
            </div>
        </div>

        <footer>
            <p>&copy; 2024 CDSANABRIACF. Todos los derechos reservados.</p>
            <p>Club Deportivo Sanabriacf - Miembro de TURISTEAM</p>
        </footer>
    </div>

    <div style="position: fixed; bottom: 20px; right: 20px; display: flex; gap: 10px; z-index: 1000;">
        <button class="admin-button" onclick="openAdminPanel()">üîß Admin</button>
        <button class="coach-access-button" onclick="openCoachesAccess()" style="background: #059669; color: white; border: none; padding: 10px 15px; border-radius: 25px; cursor: pointer; font-size: 0.9rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.3s ease;">üë®‚Äçüè´ Entrenadores/as</button>
    </div>

    <script>
        // Configuraci√≥n espec√≠fica para CDSANABRIACF
        let teamSettings = {
            teamName: 'CDSANABRIACF',
            teamSubtitle: 'Club Deportivo Sanabriacf - Pasi√≥n por el F√∫tbol',
            contactEmail: 'cdsanabriafc@gmail.com',
            phoneNumber: '+34 123 456 789',
            address: 'Crta. de El Pinar, s/n, 49300 Puebla de Sanabria, Zamora',
            primaryColor: '#dc2626', // Rojo por defecto
            secondaryColor: '#3b82f6', // Azul por defecto
            textColor: '#1f2937',
            textLightColor: '#6b7280',
            buttonColor: '#dc2626',
            buttonHoverColor: '#b91c1c',
            backgroundColor: '#ffffff',
            cardBackgroundColor: '#f8fafc',
            teamLogo: null,
            teamShield: null,
            favicon: null,
            logoWidth: '150',
            logoHeight: '150',
            logoMessage: '¬°Bienvenidos al Club Deportivo Sanabriacf! ‚öΩ',
            adHeader: '',
            adSidebar: '',
            adFooter: '',
            adPopup: '',
            adFrequency: 'always'
        };

        // Cargar configuraci√≥n del equipo
        function loadSettings() {
            const savedSettings = localStorage.getItem('cdsanabriacfSettings');
            if (savedSettings) {
                teamSettings = JSON.parse(savedSettings);
                            // Forzar colores fijos siempre
            teamSettings.primaryColor = '#dc2626'; // Rojo fijo
            teamSettings.secondaryColor = '#3b82f6'; // Azul fijo
            } else {
                // Configuraci√≥n por defecto para CDSANABRIACF
                teamSettings = {
                    teamName: 'CDSANABRIACF',
                    teamSubtitle: 'Club Deportivo Sanabriacf',
                    primaryColor: '#dc2626', // Rojo fijo por defecto
                    secondaryColor: '#3b82f6', // Azul fijo por defecto
                    textColor: '#1f2937',
                    textLightColor: '#6b7280',
                    buttonColor: '#dc2626',
                    buttonHoverColor: '#b91c1c',
                    backgroundColor: '#ffffff',
                    cardBackgroundColor: '#f8fafc',
                    teamLogo: '',
                    teamShield: '',
                    favicon: '',
                    logoMessage: '¬°Bienvenidos al Club Deportivo Sanabriacf! ‚öΩ',
                    adHeader: '',
                    adFooter: '',
                    adPopup: '',
                    adFrequency: 'once'
                };
                localStorage.setItem('cdsanabriacfSettings', JSON.stringify(teamSettings));
            }
            applySettings();
        }

        // Aplicar configuraci√≥n a la p√°gina
        function applySettings() {
            // Aplicar t√≠tulo y subt√≠tulo
            document.title = teamSettings.teamName + ' - Equipo de F√∫tbol';
            document.querySelector('h1').textContent = '‚öΩ ' + teamSettings.teamName;
            document.querySelector('.subtitle').textContent = teamSettings.teamSubtitle;

            // Forzar colores fijos
            const primaryColor = '#dc2626'; // Rojo fijo
            const secondaryColor = '#3b82f6'; // Azul fijo
            
            document.documentElement.style.setProperty('--primary-color', primaryColor);
            document.documentElement.style.setProperty('--secondary-color', secondaryColor);
            document.documentElement.style.setProperty('--text-color', teamSettings.textColor);
            document.documentElement.style.setProperty('--text-light-color', teamSettings.textLightColor);
            document.documentElement.style.setProperty('--button-color', teamSettings.buttonColor);
            document.documentElement.style.setProperty('--button-hover-color', teamSettings.buttonHoverColor);
            document.documentElement.style.setProperty('--background-color', teamSettings.backgroundColor);
            document.documentElement.style.setProperty('--card-background-color', teamSettings.cardBackgroundColor);

            // Aplicar texto CDSANABRIACF en blanco
            applyCDSANABRIACFWhiteColor();

            // Aplicar logo del club
            loadClubLogo();

            // Aplicar mensaje debajo del logo
            loadLogoMessage();

            // Aplicar favicon
            if (teamSettings.favicon) {
                const favicon = document.querySelector('link[rel="icon"]') || document.createElement('link');
                favicon.rel = 'icon';
                favicon.href = teamSettings.favicon;
                document.head.appendChild(favicon);
            }

            // Aplicar publicidad
            applyAdvertisements();
        }

        // Funci√≥n para aplicar color blanco al texto CDSANABRIACF
        function applyCDSANABRIACFWhiteColor() {
            // Buscar todos los elementos que contengan "CDSANABRIACF"
            const elements = document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span, div, strong, b');
            elements.forEach(element => {
                if (element.textContent.includes('CDSANABRIACF')) {
                    element.style.color = '#ffffff';
                }
            });
            
            // Buscar espec√≠ficamente el t√≠tulo principal
            const mainTitle = document.querySelector('h1');
            if (mainTitle && mainTitle.textContent.includes('CDSANABRIACF')) {
                mainTitle.style.color = '#ffffff';
            }
            
            console.log('‚úÖ Texto CDSANABRIACF aplicado en color blanco');
        }

        // Funci√≥n para cargar el logo del club
        function loadClubLogo() {
            try {
                const clubLogoData = localStorage.getItem('clubLogo');
                const logoElement = document.querySelector('.team-logo');
                
                if (!logoElement) {
                    console.error('‚ùå No se encontr√≥ el elemento .team-logo');
                    return;
                }
                
                if (clubLogoData && clubLogoData !== 'null' && clubLogoData !== '' && clubLogoData !== 'undefined') {
                    // Intentar parsear como JSON (formato del panel de admin)
                    let logoUrl = null;
                    try {
                        const logoObj = JSON.parse(clubLogoData);
                        if (logoObj && logoObj.dataUrl) {
                            logoUrl = logoObj.dataUrl;
                        }
                    } catch (e) {
                        // Si no es JSON, usar como string directo (formato antiguo)
                        logoUrl = clubLogoData;
                    }
                    
                    if (logoUrl) {
                        // Si hay un logo guardado, mostrarlo
                        logoElement.innerHTML = `<img src="${logoUrl}" alt="Logo del Club CDSANABRIACF" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 4px solid var(--secondary-color);">`;
                        console.log('‚úÖ Logo del club cargado correctamente');
                        
                        // Verificar que la imagen se carg√≥ correctamente
                        const img = logoElement.querySelector('img');
                        if (img) {
                            img.onload = function() {
                                console.log('‚úÖ Imagen del logo cargada exitosamente');
                            };
                            img.onerror = function() {
                                console.error('‚ùå Error al cargar la imagen del logo');
                                loadDefaultLogo();
                            };
                        }
                    } else {
                        loadDefaultLogo();
                    }
                } else {
                    loadDefaultLogo();
                }
            } catch (error) {
                console.error('‚ùå Error cargando logo del club:', error);
                loadDefaultLogo();
            }
        }

        // Funci√≥n para cargar el logo por defecto
        function loadDefaultLogo() {
            const logoElement = document.querySelector('.team-logo');
            if (logoElement) {
                // Siempre usar el escudo del Sanabria como logo por defecto
                logoElement.innerHTML = `<img src="escudo-sanabria.jpeg" alt="Escudo CDSANABRIACF" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 4px solid var(--secondary-color);">`;
                console.log('‚úÖ Logo por defecto cargado (escudo del Sanabria)');
            }
        }

        // Funci√≥n para cargar el mensaje debajo del logo
        function loadLogoMessage() {
            const messageElement = document.getElementById('logoMessage');
            if (messageElement) {
                // Cargar desde la configuraci√≥n del equipo
                const teamSettings = JSON.parse(localStorage.getItem('cdsanabriacfSettings') || '{}');
                const messageText = teamSettings.logoMessage || '¬°Bienvenidos al Club Deportivo Sanabriacf! ‚öΩ';
                
                messageElement.innerHTML = messageText;
                console.log('‚úÖ Mensaje del logo cargado:', messageText);
            }
        }



        // Aplicar publicidad
        function applyAdvertisements() {
            // Publicidad en header
            if (teamSettings.adHeader) {
                const headerAd = document.createElement('div');
                headerAd.className = 'header-ad';
                headerAd.innerHTML = teamSettings.adHeader;
                headerAd.style.cssText = 'background: #f8f9fa; padding: 10px; text-align: center; border-bottom: 1px solid #ddd;';
                document.body.insertBefore(headerAd, document.body.firstChild);
            }

            // Publicidad en footer
            if (teamSettings.adFooter) {
                const footerAd = document.createElement('div');
                footerAd.className = 'footer-ad';
                footerAd.innerHTML = teamSettings.adFooter;
                footerAd.style.cssText = 'background: #f8f9fa; padding: 10px; text-align: center; border-top: 1px solid #ddd; margin-top: 20px;';
                document.querySelector('footer').appendChild(footerAd);
            }

            // Publicidad popup
            if (teamSettings.adPopup && shouldShowPopup()) {
                setTimeout(() => {
                    showPopupAd();
                }, 2000);
            }
        }

        // Verificar si debe mostrar popup
        function shouldShowPopup() {
            const lastShown = localStorage.getItem('lastPopupAd');
            const now = Date.now();
            
            switch (teamSettings.adFrequency) {
                case 'once':
                    return !lastShown;
                case 'daily':
                    return !lastShown || (now - parseInt(lastShown)) > 24 * 60 * 60 * 1000;
                case 'weekly':
                    return !lastShown || (now - parseInt(lastShown)) > 7 * 24 * 60 * 60 * 1000;
                default:
                    return true;
            }
        }

        // Mostrar publicidad popup
        function showPopupAd() {
            const popup = document.createElement('div');
            popup.className = 'popup-ad';
            popup.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 1000;
                max-width: 400px;
                width: 90%;
            `;
            
            popup.innerHTML = `
                <div style="text-align: right;">
                    <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 20px; cursor: pointer;">√ó</button>
                </div>
                ${teamSettings.adPopup}
            `;
            
            document.body.appendChild(popup);
            localStorage.setItem('lastPopupAd', Date.now().toString());
        }

        // Escuchar mensajes del panel de administraci√≥n
        window.addEventListener('message', function(event) {
            if (event.data.type === 'UPDATE_SETTINGS') {
                Object.assign(teamSettings, event.data.settings);
                applySettings();
            }
        });

        // Escuchar cambios en el localStorage para actualizar el logo
        window.addEventListener('storage', function(event) {
            if (event.key === 'clubLogo') {
                loadClubLogo();
            }
            if (event.key === 'cdsanabriacfSettings') {
                loadLogoMessage();
            }
        });

        // Funci√≥n para acceder al panel de administraci√≥n
        function openAdminPanel() {
            // Usar el modal de administraci√≥n existente
            document.getElementById('adminModal').style.display = 'block';
            document.getElementById('adminEmail').focus();
        }

        // Funci√≥n para login del administrador
        function loginAdmin(event) {
            event.preventDefault();
            
            const email = document.getElementById('adminEmail').value.trim();
            const password = document.getElementById('adminPassword').value.trim();
            
            console.log('üîç Intentando autenticaci√≥n de administrador con:', email);
            
            // Verificar si es el administrador principal
            if (email.toLowerCase() === 'amco@gmx.es') {
                if (password === '533712' || password === 'admin123') {
                    console.log('‚úÖ Autenticaci√≥n exitosa como administrador principal');
                    
                    // Guardar sesi√≥n del administrador principal
                    const admin = {
                        id: 'ADMIN_CDSANABRIACF',
                        name: 'Administrador Principal CDSANABRIACF',
                        email: email,
                        teamId: 'CDSANABRIACF',
                        role: 'super_admin',
                        loginTime: new Date().toISOString()
                    };
                    
                    localStorage.setItem('currentAdmin', JSON.stringify(admin));
                    
                    closeLoginModal();
                    alert('‚úÖ Autenticaci√≥n exitosa.\nRedirigiendo al panel de administraci√≥n...');
                    
                    // Abrir el panel de administraci√≥n
                    window.open('admin-panel.html', '_blank');
                    return;
                } else {
                    alert('‚ùå Verifica tus credenciales.');
                    document.getElementById('adminPassword').value = '';
                    forcePasswordDots();
                    return;
                }
            }

            // Verificar si es un administrador de equipo
            const teamAdmins = JSON.parse(localStorage.getItem('teamAdmins') || '[]');
            const admin = teamAdmins.find(a => a.email === email && a.password === password);

            if (admin) {
                if (admin.status !== 'active') {
                    alert('‚ùå Tu cuenta est√° desactivada. Contacta con el administrador principal.');
                    document.getElementById('adminPassword').value = '';
                    forcePasswordDots();
                    return;
                }

                console.log('‚úÖ Autenticaci√≥n exitosa como administrador de equipo');
                
                // Guardar sesi√≥n del administrador de equipo
                const adminSession = {
                    id: admin.id,
                    name: 'Administrador de Equipo',
                    email: admin.email,
                    teamId: admin.team,
                    role: 'team_admin',
                    loginTime: new Date().toISOString()
                };
                
                localStorage.setItem('currentAdmin', JSON.stringify(adminSession));
                
                closeLoginModal();
                alert(`‚úÖ Autenticaci√≥n exitosa.\nBienvenido, administrador del equipo ${admin.team}.\nRedirigiendo al panel de administraci√≥n...`);
                
                // Abrir el panel de administraci√≥n
                window.open('admin-panel.html', '_blank');
                return;
            }

            // Verificar si es el segundo administrador (cdsanabriacf)
            if (email.toLowerCase() === 'cdsanabriafc@gmail.com' && password === 'admin123') {
                console.log('‚úÖ Autenticaci√≥n exitosa como segundo administrador');
                
                // Guardar sesi√≥n del segundo administrador
                const adminSession = {
                    id: 'ADMIN_CDSANABRIACF_2',
                    name: 'Segundo Administrador CDSANABRIACF',
                    email: email,
                    teamId: 'CDSANABRIACF',
                    role: 'super_admin',
                    loginTime: new Date().toISOString()
                };
                
                localStorage.setItem('currentAdmin', JSON.stringify(adminSession));
                
                closeLoginModal();
                alert('‚úÖ Autenticaci√≥n exitosa.\nRedirigiendo al panel de administraci√≥n...');
                
                // Abrir el panel de administraci√≥n
                window.open('admin-panel.html', '_blank');
                return;
            }

            // Si no es ni admin principal ni de equipo
            alert('‚ùå Verifica tus credenciales.');
            document.getElementById('adminPassword').value = '';
            forcePasswordDots();
        }

        // Funci√≥n para abrir modal de registro de amigos
        function createAmigoLoginForm() {
            return `
                <div class="modal-content">
                    <span class="close" onclick="closeLoginModal()">&times;</span>
                    <h2>ü§ù Acceso de Amigo del Club</h2>
                    <p style="color: #059669; font-weight: bold; margin-bottom: 20px;">‚úÖ Introduce tus datos para acceder como amigo</p>
                    <form id="amigosLoginForm" onsubmit="loginAmigo(event)">
                        <div class="form-group">
                            <label for="amigoEmail">Correo Electr√≥nico:</label>
                            <input type="email" id="amigoEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="amigoPassword">Contrase√±a:</label>
                            <input type="password" id="amigoPassword" name="password" required>
                        </div>
                        <div class="form-group" style="display: flex; align-items: center; gap: 8px; margin: 15px 0;">
                            <input type="checkbox" id="amigoRememberSession" style="width: auto; margin: 0;">
                            <label for="amigoRememberSession" style="margin: 0; font-size: 0.9rem; color: #666;">üîê Recordar sesi√≥n</label>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="btn-primary">Acceder</button>
                            <button type="button" class="btn-secondary" onclick="closeLoginModal()">Cancelar</button>
                            <button type="button" class="btn-primary" onclick="document.getElementById('amigosModal').style.display = 'block'; closeLoginModal()">Registrarse</button>
                        </div>
                    </form>
                </div>
            `;
        }

        function openCoachesAccess() {
            // Abrir formulario de login para entrenadores usando la funci√≥n creada
            showLoginModal(createEntrenadorLoginForm());
        }

        // Funci√≥n para crear formulario de login de entrenadores
        function createEntrenadorLoginForm() {
            return `
                <div class="modal-content">
                    <span class="close" onclick="closeLoginModal()">&times;</span>
                    <h2>üë®‚Äçüè´ Acceso de Entrenador</h2>
                    <p style="color: #059669; font-weight: bold; margin-bottom: 20px;">‚úÖ Introduce tu email y contrase√±a para acceder como entrenador</p>
                    <form id="coachesLoginForm" onsubmit="loginCoach(event)">
                        <div class="form-group">
                            <label for="coachEmail">Correo Electr√≥nico:</label>
                            <input type="email" id="coachEmail" name="email" placeholder="tu@email.com" required>
                        </div>
                        <div class="form-group">
                            <label for="coachPassword">Contrase√±a:</label>
                            <input type="password" id="coachPassword" name="password" placeholder="Tu contrase√±a" required>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="btn-primary">Acceder</button>
                            <button type="button" class="btn-secondary" onclick="closeLoginModal()">Cancelar</button>
                        </div>
                    </form>
                </div>
            `;
        }

        // Funci√≥n para cerrar modal de amigos
        function closeAmigosModal() {
            document.getElementById('amigosModal').style.display = 'none';
            document.getElementById('amigosForm').reset();
        }

        // Funci√≥n para abrir modal de registro de socios
        function createSocioLoginForm() {
            return `
                <div class="modal-content">
                    <span class="close" onclick="closeLoginModal()">&times;</span>
                    <h2>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Acceso de Socio</h2>
                    <p style="color: #059669; font-weight: bold; margin-bottom: 20px;">‚úÖ Introduce tus datos para acceder como socio</p>
                    <form id="sociosLoginForm" onsubmit="loginSocio(event)">
                        <div class="form-group">
                            <label for="socioEmail">Correo Electr√≥nico:</label>
                            <input type="email" id="socioEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="socioPassword">Contrase√±a:</label>
                            <input type="password" id="socioPassword" name="password" required>
                        </div>
                        <div class="form-group" style="display: flex; align-items: center; gap: 8px; margin: 15px 0;">
                            <input type="checkbox" id="socioRememberSession" style="width: auto; margin: 0;">
                            <label for="socioRememberSession" style="margin: 0; font-size: 0.9rem; color: #666;">üîê Recordar sesi√≥n</label>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="btn-primary">Acceder</button>
                            <button type="button" class="btn-secondary" onclick="closeLoginModal()">Cancelar</button>
                            <button type="button" class="btn-primary" onclick="document.getElementById('sociosModal').style.display = 'block'; closeLoginModal()">Registrarse</button>
                        </div>
                    </form>
                </div>
            `;
        }

        // Funci√≥n para cerrar modal de socios
        function closeSociosModal() {
            document.getElementById('sociosModal').style.display = 'none';
            document.getElementById('sociosForm').reset();
        }

        // Funci√≥n para verificar el estado de login del usuario
        function getUserStatus() {
            const currentSocio = localStorage.getItem('currentSocio');
            const currentAmigo = localStorage.getItem('currentAmigo');
            const currentCoach = localStorage.getItem('currentCoach');
            
            if (currentSocio) return 'socio';
            if (currentAmigo) return 'amigo';
            if (currentCoach) return 'entrenador';
            return 'visitante';
        }

        // Funci√≥n para verificar permisos de acceso
        function checkAccess(feature) {
            const userStatus = getUserStatus();
            
            // Definir permisos por caracter√≠stica
            const permissions = {
                'equipos': ['socio', 'entrenador'],
                'calendario': ['socio', 'entrenador'],
                'eventos': ['socio', 'entrenador'],
                'competiciones': ['socio', 'amigo', 'entrenador'],
                'multimedia': ['socio', 'entrenador'],
                'encuentros': ['socio', 'amigo', 'entrenador'],
                'documentos': ['socio', 'entrenador']
            };
            
            // Si la caracter√≠stica no est√° en permisos, es accesible para todos
            if (!permissions[feature]) return true;
            
            // Verificar si el usuario tiene permisos
            return permissions[feature].includes(userStatus);
        }

        // Funci√≥n para mostrar modal de acceso restringido
        function showRestrictedAccessModal(feature) {
            const featureNames = {
                'equipos': 'Nuestro Equipo',
                'calendario': 'Partidos y Calendario',
                'eventos': 'Eventos del Club',
                'competiciones': 'Competiciones',
                'multimedia': 'Galer√≠a Multimedia',
                'encuentros': 'Encuentros',
                'documentos': 'Documentos del Club'
            };
            
            const featureName = featureNames[feature] || feature;
            
            const modalContent = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 4rem; margin-bottom: 20px;">üîí</div>
                    <h3 style="color: #dc2626; margin-bottom: 15px;">Acceso Restringido</h3>
                    <p style="color: #666; margin-bottom: 20px; line-height: 1.6;">
                        Para acceder a <strong>${featureName}</strong>, necesitas ser socio del club.
                    </p>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="color: #1e3a8a; margin-bottom: 10px;">¬øQu√© incluye ser socio?</h4>
                        <ul style="text-align: left; color: #666; line-height: 1.8;">
                            <li>‚úÖ Acceso completo a todos los contenidos del club</li>
                            <li>‚úÖ Informaci√≥n detallada de equipos y jugadores</li>
                            <li>‚úÖ Calendario completo de eventos y partidos</li>
                            <li>‚úÖ Galer√≠a multimedia exclusiva</li>
                            <li>‚úÖ Documentos oficiales del club</li>
                            <li>‚úÖ Participaci√≥n en eventos especiales</li>
                        </ul>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                        <button onclick="document.getElementById('sociosModal').style.display = 'block'; this.closest('.modal').remove();" style="background: #dc2626; color: white; border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer; font-weight: bold;">
                            üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Hacerse Socio
                        </button>
                        <button onclick="document.getElementById('amigosModal').style.display = 'block'; this.closest('.modal').remove();" style="background: #3b82f6; color: white; border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer; font-weight: bold;">
                            ü§ù Ser Amigo del Club
                        </button>
                        <button onclick="this.closest('.modal').remove()" style="background: #6b7280; color: white; border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer;">
                            ‚ùå Cancelar
                        </button>
                    </div>
                </div>
            `;
            
            showModal('Acceso Restringido', modalContent);
        }

        // Funci√≥n para abrir diferentes caracter√≠sticas con verificaci√≥n de permisos
        function openFeature(feature) {
            // Verificar si el usuario tiene acceso a esta caracter√≠stica
            if (!checkAccess(feature)) {
                showRestrictedAccessModal(feature);
                return;
            }
            
            switch(feature) {
                case 'equipos':
                    showTeamsInfo();
                    break;
                case 'calendario':
                    showCalendarInfo();
                    break;
                case 'eventos':
                    showEventsInfo();
                    break;
                case 'competiciones':
                    showCompetitionsInfo();
                    break;
                case 'multimedia':
                    showMultimediaInfo();
                    break;
                case 'encuentros':
                    mostrarEncuentros();
                    break;
                case 'documentos':
                    showDocumentsInfo();
                    break;
                case 'contacto':
                    scrollToContact();
                    break;
                default:
                    alert('Funcionalidad en desarrollo');
            }
        }

        // Mostrar informaci√≥n de equipos
        function showTeamsInfo() {
            const teams = JSON.parse(localStorage.getItem('clubPlayers') || '[]');
            const categories = ['prebenajmin', 'benjamin', 'alevin', 'infantil', 'aficionado'];
            const categoryNames = {
                'prebenajmin': 'Prebenjam√≠n',
                'benjamin': 'Benjam√≠n', 
                'alevin': 'Alev√≠n',
                'infantil': 'Infantil',
                'aficionado': 'Aficionado'
            };

            let html = '<h3>üèÜ Equipos del Club CDSANABRIACF</h3>';
            
            categories.forEach(category => {
                const categoryPlayers = teams.filter(p => p.category === category && p.status === 'active');
                html += `
                    <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                        <h4>${categoryNames[category]} (${categoryPlayers.length} jugadores)</h4>
                        ${categoryPlayers.length > 0 ? 
                            categoryPlayers.map(p => `<p>‚Ä¢ ${p.name} ${p.surname} - Dorsal: ${p.number || 'Sin asignar'}</p>`).join('') :
                            '<p>No hay jugadores registrados en esta categor√≠a</p>'
                        }
                    </div>
                `;
            });

            showModal('Equipos del Club', html);
        }

        // Mostrar informaci√≥n del calendario
        function showCalendarInfo() {
            const events = JSON.parse(localStorage.getItem('clubCalendarEvents') || '[]');
            const upcomingEvents = events.filter(e => new Date(e.date) >= new Date()).slice(0, 5);

            let html = '<h3>üìÖ Pr√≥ximos Eventos del Club</h3>';
            
            if (upcomingEvents.length > 0) {
                upcomingEvents.forEach(event => {
                    const eventDate = new Date(event.date).toLocaleDateString('es-ES');
                    html += `
                        <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <h4>${event.title}</h4>
                            <p><strong>Fecha:</strong> ${eventDate}</p>
                            <p><strong>Hora:</strong> ${event.time}</p>
                            <p><strong>Descripci√≥n:</strong> ${event.description}</p>
                        </div>
                    `;
                });
            } else {
                html += '<p>No hay eventos pr√≥ximos programados</p>';
            }

            showModal('Calendario del Club', html);
        }

        // Mostrar informaci√≥n de eventos
        function showEventsInfo() {
            const events = JSON.parse(localStorage.getItem('clubEvents') || '[]');
            const activeEvents = events.filter(e => e.status === 'active');

            let html = '<h3>üéâ Eventos del Club</h3>';
            
            if (activeEvents.length > 0) {
                activeEvents.forEach(event => {
                    const eventDate = new Date(event.date).toLocaleDateString('es-ES');
                    html += `
                        <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <h4>${event.title}</h4>
                            <p><strong>Fecha:</strong> ${eventDate}</p>
                            <p><strong>Precio:</strong> ${event.price === '0' ? 'Gratuito' : `${event.price}‚Ç¨`}</p>
                            <p><strong>Inscritos:</strong> ${event.registeredMembers?.length || 0}/${event.maxParticipants}</p>
                            <p><strong>Descripci√≥n:</strong> ${event.description}</p>
                        </div>
                    `;
                });
            } else {
                html += '<p>No hay eventos activos en este momento</p>';
            }

            showModal('Eventos del Club', html);
        }

        // Mostrar informaci√≥n de competiciones
        function showCompetitionsInfo() {
            const competitions = JSON.parse(localStorage.getItem('clubCompetitions') || '[]');
            const activeCompetitions = competitions.filter(c => c.status === 'active');

            let html = '<h3>üèÜ Competiciones del Club</h3>';
            
            if (activeCompetitions.length > 0) {
                activeCompetitions.forEach(comp => {
                    const startDate = new Date(comp.startDate).toLocaleDateString('es-ES');
                    const endDate = new Date(comp.endDate).toLocaleDateString('es-ES');
                    html += `
                        <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <h4>${comp.name}</h4>
                            <p><strong>Categor√≠a:</strong> ${comp.category}</p>
                            <p><strong>Tipo:</strong> ${comp.type}</p>
                            <p><strong>Fechas:</strong> ${startDate} - ${endDate}</p>
                            <p><strong>Equipos:</strong> ${comp.teams?.length || 0} participantes</p>
                            <p><strong>Descripci√≥n:</strong> ${comp.description}</p>
                        </div>
                    `;
                });
            } else {
                html += '<p>No hay competiciones activas en este momento</p>';
            }

            showModal('Competiciones del Club', html);
        }

        // Mostrar informaci√≥n multimedia
        function showMultimediaInfo() {
            const photos = JSON.parse(localStorage.getItem('clubPhotos') || '[]');
            const videos = JSON.parse(localStorage.getItem('clubVideos') || '[]');
            const documents = JSON.parse(localStorage.getItem('clubDocuments') || '[]');

            let html = '<h3>üì∏ Galer√≠a Multimedia del Club</h3>';
            html += `<p><strong>Fotos:</strong> ${photos.length} archivos</p>`;
            html += `<p><strong>Videos:</strong> ${videos.length} archivos</p>`;
            html += `<p><strong>Documentos:</strong> ${documents.length} archivos</p>`;
            html += '<p>Para ver la galer√≠a completa, haz clic en "Ver Galer√≠a" en la secci√≥n multimedia de abajo.</p>';

            showModal('Galer√≠a Multimedia', html);
        }

        // Mostrar informaci√≥n de documentos
        function showDocumentsInfo() {
            const documents = JSON.parse(localStorage.getItem('clubDocuments') || '[]');
            const activeDocuments = documents.filter(d => d.status === 'active');

            let html = '<h3>üìÑ Documentos del Club</h3>';
            
            if (activeDocuments.length === 0) {
                html += '<p>No hay documentos disponibles en este momento.</p>';
                html += '<p>Los administradores pueden subir documentos desde el panel de administraci√≥n.</p>';
            } else {
                html += `<p><strong>Total de documentos activos:</strong> ${activeDocuments.length}</p>`;
                html += '<div style="max-height: 400px; overflow-y: auto; margin-top: 15px;">';
                
                activeDocuments.forEach(doc => {
                    const categoryText = {
                        'reglamento': 'Reglamento',
                        'normativa': 'Normativa',
                        'formulario': 'Formulario',
                        'informacion': 'Informaci√≥n General',
                        'competicion': 'Competici√≥n',
                        'entrenamiento': 'Entrenamiento',
                        'otros': 'Otros'
                    };

                    html += `
                        <div style="border: 1px solid #dee2e6; border-radius: 8px; padding: 15px; margin-bottom: 10px; background: white;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                <div style="flex: 1;">
                                    <h4 style="margin: 0; color: #1e3a8a;">üìÑ ${doc.name}</h4>
                                    <p style="margin: 5px 0; color: #666; font-weight: bold;">üìÅ ${categoryText[doc.category] || doc.category}</p>
                                    ${doc.description ? `<p style="margin: 5px 0; color: #666; font-size: 0.9em;">${doc.description}</p>` : ''}
                                    <p style="margin: 5px 0; color: #666; font-size: 0.8em;">
                                        üìÖ Subido: ${new Date(doc.uploadDate).toLocaleDateString()} | 
                                        üìä Descargas: ${doc.downloads || 0} | 
                                        üìè Tama√±o: ${(doc.fileSize / 1024 / 1024).toFixed(2)} MB
                                    </p>
                                </div>
                                <button onclick="downloadDocumentFromMain('${doc.id}')" style="background: #059669; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; margin-left: 10px;">üì• Descargar</button>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
            }

            showModal('Documentos del Club', html);
        }

        // Funci√≥n para descargar documentos desde la p√°gina principal
        function downloadDocumentFromMain(docId) {
            try {
                const documents = JSON.parse(localStorage.getItem('clubDocuments') || '[]');
                const doc = documents.find(d => d.id === docId);
                
                if (!doc) {
                    alert('‚ùå Documento no encontrado');
                    return;
                }

                // Incrementar contador de descargas
                doc.downloads = (doc.downloads || 0) + 1;
                localStorage.setItem('clubDocuments', JSON.stringify(documents));

                // Crear enlace de descarga
                const link = document.createElement('a');
                link.href = doc.data;
                link.download = doc.fileName;
                link.target = '_blank';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                console.log('üì• Documento descargado desde p√°gina principal:', doc.name);
            } catch (error) {
                console.error('‚ùå Error descargando documento:', error);
                alert('‚ùå Error al descargar el documento');
            }
        }

        // ===== FUNCIONES PARA PUBLICIDAD =====
        
        // Cargar publicidad al iniciar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            loadPublicidadGallery();
        });

        // Cargar galer√≠a de publicidad
        function loadPublicidadGallery() {
            try {
                const publicidades = JSON.parse(localStorage.getItem('clubPublicidad') || '[]');
                const activePublicidades = publicidades.filter(p => p.estado === 'active');
                
                const gallery = document.getElementById('publicidadGallery');
                
                if (activePublicidades.length === 0) {
                    gallery.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #6c757d;">
                            <div style="font-size: 3rem; margin-bottom: 20px;">üì¢</div>
                            <h3>No hay publicidad activa</h3>
                        </div>
                    `;
                    return;
                }

                // Ordenar por prioridad y fecha de creaci√≥n
                activePublicidades.sort((a, b) => {
                    if (b.prioridad !== a.prioridad) {
                        return b.prioridad - a.prioridad;
                    }
                    return new Date(b.fechaCreacion) - new Date(a.fechaCreacion);
                });

                // Separar publicidades por tipo de visualizaci√≥n
                const carruselPublicidades = activePublicidades.filter(p => p.visualizacion === 'carrusel');
                const fijaPublicidades = activePublicidades.filter(p => p.visualizacion === 'fija');
                const bannerPublicidades = activePublicidades.filter(p => p.visualizacion === 'banner');
                const tarjetaPublicidades = activePublicidades.filter(p => p.visualizacion === 'tarjeta' || !p.visualizacion);

                let html = '';

                // Mostrar carrusel si hay publicidades de carrusel
                if (carruselPublicidades.length > 0) {
                    html += createCarruselHTML(carruselPublicidades);
                }

                // Mostrar publicidades fijas
                if (fijaPublicidades.length > 0) {
                    html += '<div style="margin: 20px 0;"><h3 style="color: #1e3a8a; margin-bottom: 15px;">üì¢ Publicidad Fija</h3>';
                    html += createFijaHTML(fijaPublicidades);
                    html += '</div>';
                }

                // Mostrar banners
                if (bannerPublicidades.length > 0) {
                    html += '<div style="margin: 20px 0;"><h3 style="color: #1e3a8a; margin-bottom: 15px;">üéØ Banners Promocionales</h3>';
                    html += createBannerHTML(bannerPublicidades);
                    html += '</div>';
                }

                // Mostrar tarjetas individuales
                if (tarjetaPublicidades.length > 0) {
                    html += '<div style="margin: 20px 0;"><h3 style="color: #1e3a8a; margin-bottom: 15px;">üìã Publicidad en Tarjetas</h3>';
                    html += createTarjetaHTML(tarjetaPublicidades);
                    html += '</div>';
                }

                gallery.innerHTML = html;

                // Inicializar carrusel si existe
                if (carruselPublicidades.length > 0) {
                    initCarrusel();
                }

                // Guardar las visualizaciones actualizadas
                activePublicidades.forEach(pub => {
                    pub.views = (pub.views || 0) + 1;
                });
                localStorage.setItem('clubPublicidad', JSON.stringify(publicidades));

                console.log('üì¢ Galer√≠a de publicidad cargada:', activePublicidades.length, 'publicidades activas');
            } catch (error) {
                console.error('‚ùå Error cargando galer√≠a de publicidad:', error);
                document.getElementById('publicidadGallery').innerHTML = '<p style="text-align: center; color: #dc2626;">Error al cargar la publicidad</p>';
            }
        }

        // Crear HTML del carrusel
        function createCarruselHTML(publicidades) {
            let html = '<div class="publicidad-carrusel">';
            html += '<div class="carrusel-slides" id="carruselSlides">';
            
            publicidades.forEach((pub, index) => {
                html += `
                    <div class="carrusel-slide" onclick="clickPublicidad('${pub.id}', '${pub.enlace || ''}')">
                        ${pub.imagen ? `<img src="${pub.imagen}" alt="${pub.titulo}">` : ''}
                        <div class="carrusel-content">
                            <h3>${pub.titulo}</h3>
                            <p>${pub.descripcion}</p>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            
            if (publicidades.length > 1) {
                html += '<div class="carrusel-controls">';
                html += '<button class="carrusel-btn" onclick="changeCarruselSlide(-1)">‚ùÆ</button>';
                html += '<button class="carrusel-btn" onclick="changeCarruselSlide(1)">‚ùØ</button>';
                html += '</div>';
                
                html += '<div class="carrusel-dots" id="carruselDots">';
                publicidades.forEach((_, index) => {
                    html += `<div class="carrusel-dot ${index === 0 ? 'active' : ''}" onclick="goToCarruselSlide(${index})"></div>`;
                });
                html += '</div>';
            }
            
            html += '</div>';
            return html;
        }

        // Crear HTML de publicidad fija
        function createFijaHTML(publicidades) {
            let html = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">';
            
            publicidades.forEach(pub => {
                html += `
                    <div class="publicidad-fija" onclick="clickPublicidad('${pub.id}', '${pub.enlace || ''}')">
                        ${pub.imagen ? `<img src="${pub.imagen}" alt="${pub.titulo}">` : ''}
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 15px;">
                            <h4>${pub.titulo}</h4>
                            <p>${pub.descripcion}</p>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }

        // Crear HTML de banners
        function createBannerHTML(publicidades) {
            let html = '<div style="display: grid; gap: 15px;">';
            
            publicidades.forEach(pub => {
                html += `
                    <div class="publicidad-banner" onclick="clickPublicidad('${pub.id}', '${pub.enlace || ''}')">
                        ${pub.imagen ? `<img src="${pub.imagen}" alt="${pub.titulo}">` : ''}
                        <div style="flex: 1;">
                            <h4 style="margin: 0 0 10px 0;">${pub.titulo}</h4>
                            <p style="margin: 0; opacity: 0.9;">${pub.descripcion}</p>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }

        // Crear HTML de tarjetas
        function createTarjetaHTML(publicidades) {
            let html = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">';
            
            publicidades.forEach(pub => {
                const prioridadColor = {
                    1: '#6c757d',
                    2: '#f59e0b',
                    3: '#dc2626'
                };
                const prioridadTexto = {
                    1: 'Baja',
                    2: 'Media',
                    3: 'Alta'
                };

                const tipoTexto = {
                    'evento': 'Evento',
                    'equipamiento': 'Equipamiento',
                    'patrocinador': 'Patrocinador',
                    'noticia': 'Noticia',
                    'promocion': 'Promoci√≥n',
                    'otros': 'Otros'
                };
                
                html += `
                    <div style="background: white; border-radius: 15px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 2px solid ${prioridadColor[pub.prioridad]}; transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                            <div style="flex: 1;">
                                <h3 style="margin: 0; color: #1e3a8a; font-size: 1.3rem;">üì¢ ${pub.titulo}</h3>
                                <p style="margin: 5px 0; color: #666; font-weight: bold;">üìÅ ${tipoTexto[pub.tipo] || pub.tipo}</p>
                            </div>
                            <span style="background: ${prioridadColor[pub.prioridad]}; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: bold;">${prioridadTexto[pub.prioridad]}</span>
                        </div>
                        
                        ${pub.imagen ? `
                            <div style="margin: 15px 0; text-align: center;">
                                <img src="${pub.imagen}" alt="${pub.titulo}" style="max-width: 100%; max-height: 200px; border-radius: 10px; border: 1px solid #dee2e6;">
                            </div>
                        ` : ''}
                        
                        <p style="margin: 15px 0; color: #666; line-height: 1.5;">${pub.descripcion}</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin: 15px 0; font-size: 0.9rem; color: #666;">
                            <div><strong>üëÅÔ∏è Vistas:</strong> ${pub.views || 0}</div>
                            <div><strong>üñ±Ô∏è Clics:</strong> ${pub.clicks || 0}</div>
                            <div><strong>üìÖ Creada:</strong> ${new Date(pub.fechaCreacion).toLocaleDateString()}</div>
                        </div>
                        
                        ${pub.fechaInicio || pub.fechaFin ? `
                            <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 8px; font-size: 0.9rem;">
                                ${pub.fechaInicio ? `<div><strong>üìÖ Inicio:</strong> ${pub.fechaInicio}</div>` : ''}
                                ${pub.fechaFin ? `<div><strong>üìÖ Fin:</strong> ${pub.fechaFin}</div>` : ''}
                            </div>
                        ` : ''}
                        
                        <div style="text-align: center; margin-top: 20px;">
                            ${pub.enlace ? `
                                <button onclick="clickPublicidad('${pub.id}', '${pub.enlace}')" style="background: #059669; color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; font-weight: bold; transition: all 0.3s ease;">
                                    üîó Ver M√°s
                                </button>
                            ` : `
                                <span style="color: #6c757d; font-style: italic;">Sin enlace disponible</span>
                            `}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }

        // Variables para el carrusel
        let currentCarruselSlide = 0;
        let carruselInterval;

        // Inicializar carrusel
        function initCarrusel() {
            const slides = document.querySelectorAll('.carrusel-slide');
            if (slides.length > 1) {
                // Auto-play cada 5 segundos
                carruselInterval = setInterval(() => {
                    changeCarruselSlide(1);
                }, 5000);
            }
        }

        // Cambiar slide del carrusel
        function changeCarruselSlide(direction) {
            const slides = document.querySelectorAll('.carrusel-slide');
            const dots = document.querySelectorAll('.carrusel-dot');
            
            if (slides.length === 0) return;
            
            currentCarruselSlide += direction;
            
            if (currentCarruselSlide >= slides.length) {
                currentCarruselSlide = 0;
            } else if (currentCarruselSlide < 0) {
                currentCarruselSlide = slides.length - 1;
            }
            
            updateCarrusel();
        }

        // Ir a slide espec√≠fico
        function goToCarruselSlide(index) {
            currentCarruselSlide = index;
            updateCarrusel();
        }

        // Actualizar carrusel
        function updateCarrusel() {
            const slides = document.querySelector('.carrusel-slides');
            const dots = document.querySelectorAll('.carrusel-dot');
            
            if (slides) {
                slides.style.transform = `translateX(-${currentCarruselSlide * 100}%)`;
            }
            
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentCarruselSlide);
            });
        }

        // Funci√≥n para manejar clics en publicidad
        function clickPublicidad(pubId, enlace) {
            try {
                const publicidades = JSON.parse(localStorage.getItem('clubPublicidad') || '[]');
                const pub = publicidades.find(p => p.id === pubId);
                
                if (pub) {
                    // Incrementar contador de clics
                    pub.clicks = (pub.clicks || 0) + 1;
                    localStorage.setItem('clubPublicidad', JSON.stringify(publicidades));
                    
                    console.log('üñ±Ô∏è Clic en publicidad:', pub.titulo);
                }

                // Abrir enlace en nueva pesta√±a
                if (enlace) {
                    window.open(enlace, '_blank');
                }
            } catch (error) {
                console.error('‚ùå Error manejando clic en publicidad:', error);
            }
        }

        // Mostrar informaci√≥n de documentos
        function showDocumentsInfo() {
            const documents = JSON.parse(localStorage.getItem('clubDocuments') || '[]');
            const activeDocuments = documents.filter(d => d.status === 'active');

            let html = '<h3>üìÑ Documentos del Club CDSANABRIACF</h3>';
            
            if (activeDocuments.length > 0) {
                html += '<div style="max-height: 400px; overflow-y: auto;">';
                activeDocuments.forEach(doc => {
                    const uploadDate = new Date(doc.date).toLocaleDateString('es-ES');
                    html += `
                        <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid var(--primary-color);">
                            <h4 style="color: var(--primary-color); margin-bottom: 10px;">üìÑ ${doc.name}</h4>
                            <p><strong>Categor√≠a:</strong> ${doc.category || 'General'}</p>
                            <p><strong>Descripci√≥n:</strong> ${doc.description || 'Sin descripci√≥n'}</p>
                            <p><strong>Fecha de subida:</strong> ${uploadDate}</p>
                            <p><strong>Tama√±o:</strong> ${doc.size}</p>
                            <button onclick="viewDocument('${doc.id}')" style="background: var(--primary-color); color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                                üëÅÔ∏è Ver Documento
                            </button>
                        </div>
                    `;
                });
                html += '</div>';
            } else {
                html += '<p>No hay documentos disponibles en este momento.</p>';
                html += '<p>Los administradores pueden subir documentos desde el panel de administraci√≥n.</p>';
            }

            showModal('Documentos del Club', html);
        }

        // Funci√≥n para ver documento
        function viewDocument(docId) {
            const documents = JSON.parse(localStorage.getItem('clubDocuments') || '[]');
            const doc = documents.find(d => d.id === docId);
            
            if (!doc) {
                alert('Documento no encontrado');
                return;
            }

            // Crear enlace de descarga
            const link = document.createElement('a');
            link.href = doc.data;
            link.download = doc.name;
            link.target = '_blank';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Scroll a la secci√≥n de contacto
        function scrollToContact() {
            const contactSection = document.querySelector('.contact-section');
            if (contactSection) {
                contactSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Funci√≥n para mostrar modal
        function showModal(title, content) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                padding: 30px;
                border-radius: 15px;
                max-width: 600px;
                max-height: 80vh;
                overflow-y: auto;
                position: relative;
                width: 90%;
            `;
            
            modalContent.innerHTML = `
                <div style="text-align: right; margin-bottom: 20px;">
                    <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">√ó</button>
                </div>
                <h2 style="color: var(--primary-color); margin-bottom: 20px;">${title}</h2>
                <div style="color: var(--text-color); line-height: 1.6;">
                    ${content}
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            modal.onclick = (e) => {
                if (e.target === modal) modal.remove();
            };
        }

        // Animaci√≥n simple al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            loadMultimediaGallery();
            loadClubLogo(); // Asegurar que el logo se cargue
            loadCarouselAds(); // Cargar carrusel de publicidad
            
            const cards = document.querySelectorAll('.feature-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'all 0.6s ease';
                    
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 100);
                }, index * 100);
            });
        });

        // Cargar galer√≠a multimedia
        function loadMultimediaGallery() {
            const gallery = document.getElementById('multimediaGallery');
            const photos = JSON.parse(localStorage.getItem('clubPhotos') || '[]');
            const videos = JSON.parse(localStorage.getItem('clubVideos') || '[]');
            const documents = JSON.parse(localStorage.getItem('clubDocuments') || '[]');
            
            const allFiles = [...photos, ...videos, ...documents].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (allFiles.length === 0) {
                gallery.innerHTML = '<p>No hay archivos multimedia disponibles</p>';
                return;
            }

            let html = '';
            allFiles.forEach(file => {
                const isImage = file.type.startsWith('image/');
                const isVideo = file.type.startsWith('video/');
                const isDocument = file.type.includes('pdf') || file.type.includes('document') || file.type.includes('spreadsheet') || file.type.includes('presentation');
                
                let typeText = 'Documento';
                if (isImage) typeText = 'Imagen';
                else if (isVideo) typeText = 'Video';

                html += `
                    <div class="gallery-item" onclick="viewFile('${file.id}', '${isImage ? 'clubPhotos' : isVideo ? 'clubVideos' : 'clubDocuments'}')">
                        ${isImage ? `<img src="${file.data}" alt="${file.name}">` : 
                          isVideo ? `<video src="${file.data}" muted></video>` : 
                          `<div style="width: 100%; height: 200px; display: flex; align-items: center; justify-content: center; background: #f0f0f0; font-size: 4rem;">üìÑ</div>`}
                        <div class="gallery-item-info">
                            <div class="gallery-item-title">${file.name}</div>
                            <div class="gallery-item-type">${typeText} - ${file.size}</div>
                        </div>
                    </div>
                `;
            });
            
            gallery.innerHTML = html;
        }

        // Ver archivo en modal
        function viewFile(fileId, storageKey) {
            const files = JSON.parse(localStorage.getItem(storageKey) || '[]');
            const file = files.find(f => f.id === fileId);
            
            if (!file) return;

            const isImage = file.type.startsWith('image/');
            const isVideo = file.type.startsWith('video/');
            
            if (isImage || isVideo) {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10000;
                `;
                
                const content = document.createElement('div');
                content.style.cssText = `
                    max-width: 90%;
                    max-height: 90%;
                    position: relative;
                `;
                
                if (isImage) {
                    const img = document.createElement('img');
                    img.src = file.data;
                    img.style.cssText = 'max-width: 100%; max-height: 100%; object-fit: contain;';
                    content.appendChild(img);
                } else if (isVideo) {
                    const video = document.createElement('video');
                    video.src = file.data;
                    video.controls = true;
                    video.style.cssText = 'max-width: 100%; max-height: 100%;';
                    content.appendChild(video);
                }
                
                const closeBtn = document.createElement('button');
                closeBtn.textContent = '√ó';
                closeBtn.style.cssText = `
                    position: absolute;
                    top: -40px;
                    right: 0;
                    background: none;
                    border: none;
                    color: white;
                    font-size: 30px;
                    cursor: pointer;
                `;
                closeBtn.onclick = () => modal.remove();
                
                content.appendChild(closeBtn);
                modal.appendChild(content);
                document.body.appendChild(modal);
                
                modal.onclick = (e) => {
                    if (e.target === modal) modal.remove();
                };
            } else {
                // Para documentos, abrir en nueva pesta√±a
                const link = document.createElement('a');
                link.href = file.data;
                link.target = '_blank';
                link.click();
            }
        }
        
        // Funciones para mostrar el d√≠a actual
        function updateCurrentDayDisplay() {
            const now = new Date();
            const days = ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'];
            const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                           'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            
            const dayName = days[now.getDay()];
            const dayNumber = now.getDate();
            const monthName = months[now.getMonth()];
            const year = now.getFullYear();
            
            const currentDayDisplay = document.getElementById('currentDayDisplay');
            if (currentDayDisplay) {
                currentDayDisplay.textContent = `üìÖ ${dayName}, ${dayNumber} de ${monthName} de ${year}`;
            }
            
            const currentTimeDisplay = document.getElementById('currentTimeDisplay');
            if (currentTimeDisplay) {
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const seconds = now.getSeconds().toString().padStart(2, '0');
                currentTimeDisplay.textContent = `‚è∞ ${hours}:${minutes}:${seconds}`;
            }
        }
        
        // Iniciar actualizaci√≥n del d√≠a actual
        function startCurrentDayTimer() {
            // Actualizar inmediatamente
            updateCurrentDayDisplay();
            
            // Actualizar cada segundo
            setInterval(updateCurrentDayDisplay, 1000);
        }
        
        // Iniciar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            startCurrentDayTimer();
            loadMultimediaGallery();
            loadContactInfoFromSettings();
            loadClubLogo(); // Cargar el logo del club
            limpiarSociosExpirados(); // Limpiar socios expirados
        });

        // ===== FUNCIONES PARA POL√çTICA DE PROTECCI√ìN DE DATOS =====
        
        function togglePrivacyPolicy() {
            const content = document.getElementById('privacyContent');
            const toggle = document.getElementById('privacyToggle');
            
            if (content.style.display === 'none' || content.style.display === '') {
                content.style.display = 'block';
                toggle.textContent = '‚ñ≤';
            } else {
                content.style.display = 'none';
                toggle.textContent = '‚ñº';
            }
        }

        // ===== FUNCIONES PARA DATOS DE CONTACTO =====
        
        function loadContactInfoFromSettings() {
            try {
                const contactInfo = JSON.parse(localStorage.getItem('clubContactInfo') || 'null');
                if (contactInfo) {
                    // Actualizar datos de contacto en la p√°gina principal
                    const emailElement = document.getElementById('contactEmail');
                    const phoneElement = document.getElementById('contactPhone');
                    const addressElement = document.getElementById('contactAddress');
                    const websiteElement = document.getElementById('contactWebsite');
                    const whatsappElement = document.getElementById('contactWhatsApp');
                    const hoursElement = document.getElementById('contactHours');
                    
                    if (emailElement) emailElement.textContent = contactInfo.email || 'cdsanabriafc@gmail.com';
                    if (phoneElement) phoneElement.textContent = contactInfo.phone || '+34 600 000 000';
                    if (addressElement) addressElement.textContent = contactInfo.address || 'Crta. de El Pinar, s/n, 49300 Puebla de Sanabria, Zamora';
                    if (websiteElement) websiteElement.textContent = contactInfo.website || 'www.cdsanabriacf.com';
                    if (whatsappElement) whatsappElement.textContent = contactInfo.whatsapp || '+34 600 000 000';
                    if (hoursElement) hoursElement.textContent = contactInfo.hours || 'Lunes a Viernes: 9:00 - 18:00';
                    
                    console.log('üìû Datos de contacto cargados desde configuraci√≥n');
                }
            } catch (error) {
                console.error('‚ùå Error cargando datos de contacto:', error);
            }
        }

        // ===== FUNCIONES PARA REGISTRO DE SOCIOS =====
        
        function calcularEdad(fechaStr) {
            const hoy = new Date();
            const cumple = new Date(fechaStr);
            let edad = hoy.getFullYear() - cumple.getFullYear();
            const m = hoy.getMonth() - cumple.getMonth();
            if (m < 0 || (m === 0 && hoy.getDate() < cumple.getDate())) {
                edad--;
            }
            return edad;
        }

        function actualizarCuotaSocioPorEdad() {
            const fecha = document.getElementById('socioFechaNacimiento').value;
            const cuotaInput = document.getElementById('socioCuota');
            const edadInfo = document.getElementById('socioEdadInfo');
            if (!fecha) return;
            const edad = calcularEdad(fecha);
            if (edadInfo) edadInfo.textContent = `Edad: ${edad} a√±os`;
            const esMenor = edad <= 17;
            const monto = esMenor ? 10 : 20;
            cuotaInput.value = monto;
            // Sincronizar radios
            const radios = document.getElementsByName('socioCuotaRadio');
            radios.forEach(r => { r.checked = (parseInt(r.value) === monto); });
        }

        function seleccionarCuotaManual(monto) {
            const cuotaInput = document.getElementById('socioCuota');
            cuotaInput.value = monto;
        }
        
        function registerSocio(event) {
            event.preventDefault();
            
            try {
                const nombre = document.getElementById('socioNombre').value.trim();
                const apellidos = document.getElementById('socioApellidos').value.trim();
                const fechaNacimiento = document.getElementById('socioFechaNacimiento').value;
                const dni = document.getElementById('socioDNI').value.trim();
                const direccion = document.getElementById('socioDireccion').value.trim();
                const telefono = document.getElementById('socioTelefono').value.trim();
                const email = document.getElementById('socioEmail').value.trim();
                const cuota = parseFloat(document.getElementById('socioCuota').value) || 20;
                const consentimiento = document.getElementById('socioConsentimiento').checked;
                
                // Validaciones
                if (!nombre || !apellidos || !dni || !direccion || !telefono || !email || !fechaNacimiento) {
                    alert('‚ùå Por favor, completa todos los campos obligatorios:\n‚Ä¢ Nombre\n‚Ä¢ Apellidos\n‚Ä¢ DNI\n‚Ä¢ Direcci√≥n\n‚Ä¢ Tel√©fono\n‚Ä¢ Email\n‚Ä¢ Fecha de Nacimiento');
                    return;
                }
                
                if (!consentimiento) {
                    alert('‚ùå Debes aceptar las condiciones para registrarte como socio');
                    return;
                }
                
                // Verificar si ya existe un socio con ese DNI, email o tel√©fono
                const socios = JSON.parse(localStorage.getItem('clubMembers') || '[]');
                const existeSocio = socios.find(s => 
                    (s.dni && s.dni === dni) || 
                    (s.email && s.email === email) || 
                    s.telefono === telefono
                );
                
                if (existeSocio) {
                    alert('‚ùå Ya existe un socio registrado con esos datos (DNI, email o tel√©fono)');
                    return;
                }
                
                // Crear nuevo socio
                const nuevoSocio = {
                    id: Date.now().toString(),
                    name: nombre,
                    surname: apellidos,
                    dni: dni,
                    address: direccion,
                    phone: telefono,
                    email: email,
                    password: password,
                    cuota: cuota,
                    birthDate: fechaNacimiento,
                    registrationDate: new Date().toISOString(),
                    fechaVencimiento: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(), // 7 d√≠as
                    status: 'pending_validation', // pending_validation, active, expired
                    pagado: false,
                    memberNumber: generarNumeroSocio()
                };
                
                // Guardar en localStorage
                socios.push(nuevoSocio);
                localStorage.setItem('clubMembers', JSON.stringify(socios));
                
                // Sincronizar con la web
                syncDataWithWeb();
                
                // Cerrar modal y mostrar confirmaci√≥n
                closeSociosModal();
                
                // Mostrar mensaje de √©xito
                const mensaje = `‚úÖ ¬°Socio registrado exitosamente!\n\nüìã Datos del registro:\n‚Ä¢ N√∫mero de Socio: ${nuevoSocio.memberNumber}\n‚Ä¢ Nombre: ${nombre} ${apellidos}\n‚Ä¢ Tel√©fono: ${telefono}\n‚Ä¢ Cuota: ${cuota}‚Ç¨\n\n‚ö†Ô∏è IMPORTANTE:\n‚Ä¢ Tienes 7 d√≠as para completar el pago\n‚Ä¢ Un administrador validar√° tu registro\n‚Ä¢ Guarda tu n√∫mero de socio: ${nuevoSocio.memberNumber}\n\nüîÑ Datos sincronizados con la web.`;
                
                alert(mensaje);
                
                // Limpiar formulario
                document.getElementById('sociosForm').reset();
                
                console.log('üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Nuevo socio registrado:', nuevoSocio);
                
            } catch (error) {
                console.error('Error al registrar socio:', error);
                alert('‚ùå Error al registrar socio. Por favor, int√©ntalo de nuevo.');
            }
        }
        
        function generarNumeroSocio() {
            const socios = JSON.parse(localStorage.getItem('clubMembers') || '[]');
            let ultimoNumero = 0;
            
            if (socios.length > 0) {
                // Buscar el n√∫mero m√°s alto existente
                socios.forEach(socio => {
                    if (socio.numeroSocio) {
                        const numero = parseInt(socio.numeroSocio.replace('SOC-', ''));
                        if (!isNaN(numero) && numero > ultimoNumero) {
                            ultimoNumero = numero;
                        }
                    }
                });
            }
            
            return `SOC-${(ultimoNumero + 1).toString().padStart(4, '0')}`;
        }

        // ===== FUNCIONES PARA REGISTRO DE AMIGOS =====
        
        function registerAmigo(event) {
            event.preventDefault();
            
            try {
                const nombre = document.getElementById('amigoNombre').value.trim();
                const apellidos = document.getElementById('amigoApellidos').value.trim();
                const dni = document.getElementById('amigoDNI').value.trim();
                const telefono = document.getElementById('amigoTelefono').value.trim();
                const email = document.getElementById('amigoEmail').value.trim();
                const consentimiento = document.getElementById('amigoConsentimiento').checked;
                
                // Validaciones
                if (!nombre || !apellidos || !dni || !telefono || !email) {
                    alert('‚ùå Por favor, completa todos los campos obligatorios:\n‚Ä¢ Nombre\n‚Ä¢ Apellidos\n‚Ä¢ DNI\n‚Ä¢ Tel√©fono\n‚Ä¢ Correo Electr√≥nico');
                    return;
                }
                
                if (!consentimiento) {
                    alert('‚ùå Debes aceptar las condiciones para registrarte como amigo del club');
                    return;
                }
                
                // Verificar si ya existe un amigo con ese email o tel√©fono
                const amigos = JSON.parse(localStorage.getItem('clubFriends') || '[]');
                const existeAmigo = amigos.find(a => 
                    a.email === email || a.telefono === telefono
                );
                
                if (existeAmigo) {
                    alert('‚ùå Ya existe un amigo registrado con ese email o tel√©fono');
                    return;
                }
            
                // Crear nuevo amigo
                const nuevoAmigo = {
                    id: Date.now().toString(),
                    name: nombre,
                    surname: apellidos,
                    dni: dni,
                    phone: telefono,
                    email: email,
                    password: password,
                    registrationDate: new Date().toISOString(),
                    status: 'active'
                };
                
                // Guardar en localStorage
                amigos.push(nuevoAmigo);
                localStorage.setItem('clubFriends', JSON.stringify(amigos));
                
                // Sincronizar con la web
                syncDataWithWeb();
                
                // Cerrar modal y mostrar confirmaci√≥n
                closeAmigosModal();
                
                // Mostrar mensaje de √©xito
                const mensaje = `‚úÖ ¬°Amigo del club registrado exitosamente!\n\nüìã Datos del registro:\n‚Ä¢ Nombre: ${nombre} ${apellidos}\n‚Ä¢ Email: ${email}\n‚Ä¢ Tel√©fono: ${telefono}\n\nüîë Para acceder:\n‚Ä¢ Usa tu email y contrase√±a\n‚Ä¢ Acceso inmediato a contenido limitado\n\nüîÑ Datos sincronizados con la web.`;
                
                alert(mensaje);
                
                // Limpiar formulario
                document.getElementById('amigosForm').reset();
                
                console.log('ü§ù Nuevo amigo registrado:', nuevoAmigo);
                
            } catch (error) {
                console.error('Error al registrar amigo:', error);
                alert('‚ùå Error al registrar amigo. Por favor, int√©ntalo de nuevo.');
            }
        }

        // ===== FUNCI√ìN DE INICIALIZACI√ìN Y VERIFICACI√ìN =====
        function inicializarAplicacion() {
            console.log('üöÄ Inicializando aplicaci√≥n CDSANABRIACF...');
            
            // Verificar que los formularios est√©n disponibles
            setTimeout(() => {
                const sociosForm = document.getElementById('sociosForm');
                const amigosForm = document.getElementById('amigosForm');
                
                if (sociosForm) {
                    console.log('‚úÖ Formulario de socios listo');
                } else {
                    console.log('‚ùå Formulario de socios no encontrado');
                }
                
                if (amigosForm) {
                    console.log('‚úÖ Formulario de amigos listo');
                } else {
                    console.log('‚ùå Formulario de amigos no encontrado');
                }
                
                // Verificar localStorage
                const socios = JSON.parse(localStorage.getItem('clubMembers') || '[]');
                const amigos = JSON.parse(localStorage.getItem('clubFriends') || '[]');
                console.log(`üìä Socios registrados: ${socios.length}`);
                console.log(`ü§ù Amigos registrados: ${amigos.length}`);
                
            }, 1000);
        }
        
        // ===== FUNCIONES PARA LOGIN DIN√ÅMICO =====
        function showLoginModal(content) {
            // Crear modal din√°mico para login
            const modal = document.createElement('div');
            modal.id = 'loginModal';
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = content;
            document.body.appendChild(modal);
        }

        function closeLoginModal() {
            const modal = document.getElementById('loginModal');
            if (modal) {
                modal.remove();
            }
        }

        // ===== FUNCIONES DE LOGIN PARA SOCIOS =====
        function loginSocio(event) {
            event.preventDefault();
            
            const email = document.getElementById('socioEmail').value.trim();
            const password = document.getElementById('socioPassword').value.trim();
            const rememberSession = document.getElementById('socioRememberSession') ? document.getElementById('socioRememberSession').checked : false;
            
            if (!email || !password) {
                alert('‚ùå Por favor, introduce tu email y contrase√±a');
                return;
            }
            
            // Buscar socio en localStorage
            const socios = JSON.parse(localStorage.getItem('clubMembers') || '[]');
            const socio = socios.find(s => s.email === email);
            
            if (!socio) {
                alert('‚ùå No se encontr√≥ ning√∫n socio con ese email.');
                return;
            }
            
            // Verificar contrase√±a
            if (socio.password !== password) {
                alert('‚ùå Contrase√±a incorrecta.');
                return;
            }
            
            if (socio.status === 'expired') {
                alert('‚ùå Tu cuenta ha expirado. Contacta con el administrador para renovar tu cuota.');
                return;
            }
            
            if (socio.status === 'pending_validation') {
                alert('‚ö†Ô∏è Tu cuenta est√° pendiente de validaci√≥n. Puedes acceder pero con limitaciones.\n\nEl administrador te validar√° en los pr√≥ximos d√≠as.');
            }
            
            // Login exitoso
            const sessionData = {
                ...socio,
                loginTime: new Date().toISOString(),
                rememberSession: rememberSession
            };
            
            localStorage.setItem('currentSocio', JSON.stringify(sessionData));
            
            // Si recordar sesi√≥n est√° activado, guardar en sessionStorage tambi√©n
            if (rememberSession) {
                sessionStorage.setItem('rememberedSocio', JSON.stringify(sessionData));
            }
            
            closeLoginModal();
            alert('‚úÖ ¬°Bienvenido de vuelta! Acceso concedido como socio.');
            
            // Actualizar estado de login en la p√°gina principal
            updateLoginStatus();
            
            // Redirigir a la p√°gina de socios
            window.open('members-access.html', '_blank');
        }

        // ===== FUNCIONES DE LOGIN PARA AMIGOS =====
        function loginAmigo(event) {
            event.preventDefault();
            
            const email = document.getElementById('amigoEmail').value.trim();
            const password = document.getElementById('amigoPassword').value.trim();
            const rememberSession = document.getElementById('amigoRememberSession') ? document.getElementById('amigoRememberSession').checked : false;
            
            if (!email || !password) {
                alert('‚ùå Por favor, introduce tu email y contrase√±a');
                return;
            }
            
            // Buscar amigo en localStorage
            const amigos = JSON.parse(localStorage.getItem('clubFriends') || '[]');
            const amigo = amigos.find(a => a.email === email);
            
            if (!amigo) {
                alert('‚ùå No se encontr√≥ ning√∫n amigo con ese email.');
                return;
            }
            
            // Verificar contrase√±a
            if (amigo.password !== password) {
                alert('‚ùå Contrase√±a incorrecta.');
                return;
            }
            
            if (amigo.status !== 'active') {
                alert('‚ö†Ô∏è Tu cuenta no est√° activa, pero puedes acceder con limitaciones.\n\nContacta con el administrador para activar tu cuenta.');
            }
            
            // Login exitoso
            const sessionData = {
                ...amigo,
                loginTime: new Date().toISOString(),
                rememberSession: rememberSession
            };
            
            localStorage.setItem('currentAmigo', JSON.stringify(sessionData));
            
            // Si recordar sesi√≥n est√° activado, guardar en sessionStorage tambi√©n
            if (rememberSession) {
                sessionStorage.setItem('rememberedAmigo', JSON.stringify(sessionData));
            }
            
            closeLoginModal();
            alert('‚úÖ ¬°Bienvenido de vuelta! Acceso concedido como amigo del club.');
            
            // Actualizar estado de login en la p√°gina principal
            updateLoginStatus();
            
            // Redirigir a la p√°gina de amigos
            window.open('friends-access.html', '_blank');
        }

        // ===== FUNCIONES DE LOGIN PARA ENTRENADORES =====
        function loginCoach(event) {
            event.preventDefault();
            
            const email = document.getElementById('coachEmail').value.trim();
            const password = document.getElementById('coachPassword').value.trim();
            
            if (!email || !password) {
                alert('‚ùå Por favor, introduce tu email y contrase√±a');
                return;
            }
            
            // Buscar entrenador en localStorage
            const coaches = JSON.parse(localStorage.getItem('clubCoaches') || '[]');
            const coach = coaches.find(c => c.email === email);
            
            if (!coach) {
                alert('‚ùå No se encontr√≥ ning√∫n entrenador con ese email. Verifica tus datos.');
                return;
            }
            
            // Verificar contrase√±a
            if (coach.password !== password) {
                alert('‚ùå Contrase√±a incorrecta. Verifica tu contrase√±a.');
                return;
            }
            
            if (coach.status !== 'active') {
                alert('‚ùå Tu cuenta no est√° activa. Contacta con el administrador para validar tu acceso.');
                return;
            }
            
            // Actualizar informaci√≥n de acceso
            coach.lastAccess = new Date().toISOString();
            coach.accessCount = (coach.accessCount || 0) + 1;
            
            // Guardar cambios
            const updatedCoaches = coaches.map(c => c.id === coach.id ? coach : c);
            localStorage.setItem('clubCoaches', JSON.stringify(updatedCoaches));
            
            // Login exitoso
            localStorage.setItem('currentCoach', JSON.stringify(coach));
            closeLoginModal();
            alert(`‚úÖ ¬°Bienvenido de vuelta! Acceso concedido como entrenador.\n\nüë®‚Äçüè´ ${coach.name} ${coach.surname}\n‚öΩ Equipo: ${coach.team}`);
            
            // Actualizar estado de login en la p√°gina principal
            updateLoginStatus();
            
            // Redirigir a la p√°gina de entrenadores
            window.open('coach-panel.html', '_blank');
        }

        // ===== FUNCIONES DEL CARRUSEL DE PUBLICIDAD =====
        
        let currentSlide = 0;
        let carouselSlides = [];
        let carouselInterval;

        // Cargar anuncios del carrusel
        function loadCarouselAds() {
            try {
                const advertisements = JSON.parse(localStorage.getItem('clubAdvertisements') || '[]');
                const carouselAds = advertisements.filter(ad => 
                    ad.type === 'carrusel' && 
                    ad.status === 'active' && 
                    (!ad.startDate || new Date(ad.startDate) <= new Date()) &&
                    (!ad.endDate || new Date(ad.endDate) >= new Date())
                );
                
                if (carouselAds.length === 0) {
                    document.getElementById('adCarousel').style.display = 'none';
                    return;
                }
                
                // Ordenar por posici√≥n
                carouselAds.sort((a, b) => a.position - b.position);
                carouselSlides = carouselAds;
                
                // Mostrar carrusel
                document.getElementById('adCarousel').style.display = 'block';
                
                // Generar slides
                generateCarouselSlides();
                
                // Iniciar autoplay
                startCarouselAutoplay();
                
                console.log('‚úÖ Carrusel de publicidad cargado:', carouselAds.length, 'anuncios');
                
            } catch (error) {
                console.error('‚ùå Error cargando carrusel:', error);
                document.getElementById('adCarousel').style.display = 'none';
            }
        }

        // Generar slides del carrusel
        function generateCarouselSlides() {
            const slidesContainer = document.getElementById('carouselSlides');
            const dotsContainer = document.getElementById('carouselDots');
            
            let slidesHTML = '';
            let dotsHTML = '';
            
            carouselSlides.forEach((ad, index) => {
                // Generar slide
                slidesHTML += `
                    <div class="carousel-slide" onclick="handleAdClick('${ad.id}')">
                        ${ad.image ? `<img src="${ad.image}" alt="${ad.title}">` : ''}
                        <div class="carousel-slide-content">
                            <div class="carousel-slide-title">${ad.title}</div>
                            <div class="carousel-slide-company">${ad.company}</div>
                        </div>
                    </div>
                `;
                
                // Generar punto
                dotsHTML += `<div class="carousel-dot ${index === 0 ? 'active' : ''}" onclick="goToSlide(${index})"></div>`;
            });
            
            slidesContainer.innerHTML = slidesHTML;
            dotsContainer.innerHTML = dotsHTML;
            
            // Mostrar primer slide
            showSlide(0);
        }

        // Mostrar slide espec√≠fico
        function showSlide(index) {
            const slides = document.querySelectorAll('.carousel-slide');
            const dots = document.querySelectorAll('.carousel-dot');
            
            if (slides.length === 0) return;
            
            // Ocultar todos los slides
            slides.forEach(slide => slide.style.display = 'none');
            dots.forEach(dot => dot.classList.remove('active'));
            
            // Mostrar slide actual
            if (slides[index]) {
                slides[index].style.display = 'flex';
                dots[index].classList.add('active');
            }
            
            currentSlide = index;
        }

        // Cambiar slide
        function changeSlide(direction) {
            const totalSlides = carouselSlides.length;
            if (totalSlides === 0) return;
            
            let newIndex = currentSlide + direction;
            
            if (newIndex >= totalSlides) {
                newIndex = 0;
            } else if (newIndex < 0) {
                newIndex = totalSlides - 1;
            }
            
            showSlide(newIndex);
        }

        // Ir a slide espec√≠fico
        function goToSlide(index) {
            if (index >= 0 && index < carouselSlides.length) {
                showSlide(index);
            }
        }

        // Iniciar autoplay del carrusel
        function startCarouselAutoplay() {
            if (carouselSlides.length <= 1) return;
            
            carouselInterval = setInterval(() => {
                changeSlide(1);
            }, 5000); // Cambiar cada 5 segundos
        }

        // Detener autoplay
        function stopCarouselAutoplay() {
            if (carouselInterval) {
                clearInterval(carouselInterval);
            }
        }

        // Manejar click en anuncio
        function handleAdClick(adId) {
            try {
                const advertisements = JSON.parse(localStorage.getItem('clubAdvertisements') || '[]');
                const ad = advertisements.find(a => a.id === adId);
                
                if (ad && ad.url) {
                    // Incrementar contador de clicks
                    ad.clicks = (ad.clicks || 0) + 1;
                    localStorage.setItem('clubAdvertisements', JSON.stringify(advertisements));
                    
                    // Abrir enlace
                    window.open(ad.url, '_blank');
                    
                    console.log('‚úÖ Click en anuncio registrado:', ad.title);
                }
            } catch (error) {
                console.error('‚ùå Error manejando click en anuncio:', error);
            }
        }

        // Registrar vista de anuncio
        function registerAdView(adId) {
            try {
                const advertisements = JSON.parse(localStorage.getItem('clubAdvertisements') || '[]');
                const adIndex = advertisements.findIndex(a => a.id === adId);
                
                if (adIndex !== -1) {
                    advertisements[adIndex].views = (advertisements[adIndex].views || 0) + 1;
                    localStorage.setItem('clubAdvertisements', JSON.stringify(advertisements));
                }
            } catch (error) {
                console.error('‚ùå Error registrando vista:', error);
            }
        }

        // ===== FUNCI√ìN PARA LIMPIAR SOCIOS EXPIRADOS =====
        
        function limpiarSociosExpirados() {
            try {
                const socios = JSON.parse(localStorage.getItem('clubMembers') || '[]');
                const ahora = new Date();
                let sociosEliminados = 0;
                
                const sociosActualizados = socios.filter(socio => {
                    const fechaVencimiento = new Date(socio.fechaVencimiento);
                    const diasRestantes = Math.ceil((fechaVencimiento - ahora) / (1000 * 60 * 60 * 24));
                    
                    // Si han pasado m√°s de 7 d√≠as y no est√° pagado, eliminar
                    if (diasRestantes < 0 && !socio.pagado && socio.estado === 'pendiente') {
                        sociosEliminados++;
                        console.log(`üóëÔ∏è Socio expirado eliminado: ${socio.nombre} ${socio.apellidos} (${socio.numeroSocio})`);
                        return false;
                    }
                    
                    // Si han pasado 7 d√≠as y no est√° pagado, marcar como expirado
                    if (diasRestantes <= 0 && !socio.pagado && socio.estado === 'pendiente') {
                        socio.estado = 'expirado';
                        console.log(`‚è∞ Socio marcado como expirado: ${socio.nombre} ${socio.apellidos} (${socio.numeroSocio})`);
                    }
                    
                    return true;
                });
                
                if (sociosEliminados > 0) {
                    localStorage.setItem('clubMembers', JSON.stringify(sociosActualizados));
                    console.log(`üßπ Limpieza autom√°tica: ${sociosEliminados} socios expirados eliminados`);
                }
                
                return sociosEliminados;
            } catch (error) {
                console.error('‚ùå Error limpiando socios expirados:', error);
                return 0;
            }
        }

        // ===== FUNCI√ìN PARA ABRIR TIENDA ONLINE =====
        
        function abrirTiendaOnline() {
            try {
                // Intentar obtener la URL de la tienda desde la configuraci√≥n del administrador
                const teamSettings = JSON.parse(localStorage.getItem('teamSettings') || '{}');
                const tiendaUrl = teamSettings.tiendaUrl || teamSettings.officialStoreUrl;
                
                if (tiendaUrl && tiendaUrl.trim() !== '') {
                    // Abrir la URL configurada por el administrador
                    window.open(tiendaUrl, '_blank');
                    console.log('üè™ Abriendo tienda online configurada:', tiendaUrl);
                } else {
                    // Si no hay URL configurada, usar URL por defecto
                    const defaultUrl = 'https://sanabriacf.akinda.com/shop';
                    window.open(defaultUrl, '_blank');
                    console.log('üè™ Abriendo tienda online por defecto:', defaultUrl);
                    
                    // Opcional: Mostrar mensaje al usuario
                    alert('üè™ Abriendo tienda online oficial del club.\n\nüí° Los administradores pueden configurar una URL personalizada desde el panel de administraci√≥n.');
                }
            } catch (error) {
                console.error('‚ùå Error abriendo tienda online:', error);
                
                // En caso de error, abrir URL por defecto
                const defaultUrl = 'https://sanabriacf.akinda.com/shop';
                window.open(defaultUrl, '_blank');
                alert('üè™ Abriendo tienda online oficial del club.');
            }
        }

        // ===== FUNCIONES PARA REDES SOCIALES =====
        
        function openFacebook() {
            try {
                const teamSettings = JSON.parse(localStorage.getItem('teamSettings') || '{}');
                const facebookUrl = teamSettings.facebookUrl || 'https://www.facebook.com/CDSANABRIACF';
                const facebookUsername = teamSettings.facebookUsername || '@CDSANABRIACF';
                
                if (facebookUrl) {
                    window.open(facebookUrl, '_blank');
                    console.log('üìò Abriendo Facebook:', facebookUrl, 'Usuario:', facebookUsername);
                } else {
                    alert('üìò Facebook no est√° configurado. Contacta con el administrador.');
                }
            } catch (error) {
                console.error('‚ùå Error abriendo Facebook:', error);
                alert('‚ùå Error al abrir Facebook. Int√©ntalo de nuevo.');
            }
        }

        function openInstagram() {
            try {
                const teamSettings = JSON.parse(localStorage.getItem('teamSettings') || '{}');
                const instagramUrl = teamSettings.instagramUrl || 'https://www.instagram.com/cdsanabriacf';
                const instagramUsername = teamSettings.instagramUsername || '@cdsanabriacf';
                
                if (instagramUrl) {
                    window.open(instagramUrl, '_blank');
                    console.log('üì∑ Abriendo Instagram:', instagramUrl, 'Usuario:', instagramUsername);
                } else {
                    alert('üì∑ Instagram no est√° configurado. Contacta con el administrador.');
                }
            } catch (error) {
                console.error('‚ùå Error abriendo Instagram:', error);
                alert('‚ùå Error al abrir Instagram. Int√©ntalo de nuevo.');
            }
        }

        // ===== FUNCIONES PARA GESTI√ìN DE ENCUENTROS =====
        
        // Funci√≥n para mostrar encuentros
        function mostrarEncuentros() {
            // Ocultar todas las secciones principales correctamente
            const features = document.querySelector('.features');
            const ctaSection = document.querySelector('.cta-section');
            const multimediaSection = document.querySelector('.multimedia-section');
            
            if (features) features.style.display = 'none';
            if (ctaSection) ctaSection.style.display = 'none';
            if (multimediaSection) multimediaSection.style.display = 'none';
            
            // Mostrar la secci√≥n de encuentros
            document.getElementById('encuentros').style.display = 'block';
            
            // Cargar encuentros
            cargarEncuentros();
        }

        // Funci√≥n para cerrar encuentros
        function cerrarEncuentros() {
            // Ocultar la secci√≥n de encuentros
            document.getElementById('encuentros').style.display = 'none';
            
            // Mostrar todas las secciones principales correctamente
            const features = document.querySelector('.features');
            const ctaSection = document.querySelector('.cta-section');
            const multimediaSection = document.querySelector('.multimedia-section');
            
            if (features) features.style.display = 'grid';
            if (ctaSection) ctaSection.style.display = 'block';
            if (multimediaSection) multimediaSection.style.display = 'block';
            
            // Scroll al inicio
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Funci√≥n para cargar encuentros
        async function cargarEncuentros() {
            try {
                const encuentros = JSON.parse(localStorage.getItem('encuentros') || '[]');
                const listaEncuentros = document.getElementById('listaEncuentros');
                
                if (encuentros.length === 0) {
                    listaEncuentros.innerHTML = `
                        <div class="encuentro-placeholder">
                            <p>No hay encuentros programados en este momento</p>
                            <p>Los administradores pueden a√±adir encuentros desde el panel de administraci√≥n</p>
                        </div>
                    `;
                    return;
                }
                
                // Ordenar por fecha
                const encuentrosOrdenados = encuentros.sort((a, b) => new Date(a.fecha) - new Date(b.fecha));
            
                listaEncuentros.innerHTML = encuentrosOrdenados.map(encuentro => `
                    <div class="encuentro-card">
                        <div class="encuentro-teams">${encuentro.equipoLocal} vs ${encuentro.equipoVisitante}</div>
                        <div class="encuentro-info">
                            <div class="encuentro-info-item">
                                <span>üìÖ</span>
                                <span>${formatearFecha(encuentro.fecha)}</span>
                            </div>
                            <div class="encuentro-info-item">
                                <span>üïê</span>
                                <span>${encuentro.hora}</span>
                            </div>
                            <div class="encuentro-info-item">
                                <span>üèüÔ∏è</span>
                                <span>${encuentro.campo}</span>
                            </div>
                            <div class="encuentro-info-item">
                                <span>‚öΩ</span>
                                <span>${encuentro.categoria}</span>
                            </div>
                        </div>
                        ${encuentro.descripcion ? `
                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e5e7eb; color: #6b7280;">
                                <strong>Notas:</strong> ${encuentro.descripcion}
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error cargando encuentros:', error);
                const listaEncuentros = document.getElementById('listaEncuentros');
                listaEncuentros.innerHTML = `
                    <div class="encuentro-placeholder">
                        <p>Error al cargar los encuentros</p>
                        <p>Por favor, int√©ntalo de nuevo m√°s tarde</p>
                    </div>
                `;
            }
        }

        // Funci√≥n para formatear fecha
        function formatearFecha(fecha) {
            const opciones = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            return new Date(fecha).toLocaleDateString('es-ES', opciones);
        }

        // ===== FUNCIONES PARA MODAL DE ADMINISTRACI√ìN =====
        
        function openAdminModal() {
            document.getElementById('adminModal').style.display = 'block';
            document.getElementById('adminEmail').focus();
        }

        function closeAdminModal() {
            document.getElementById('adminModal').style.display = 'none';
            document.getElementById('adminForm').reset();
            document.getElementById('adminMessage').style.display = 'none';
        }

        function validateAdmin(event) {
            event.preventDefault();
            
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            const messageDiv = document.getElementById('adminMessage');
            
            // Verificar credenciales del super admin
            if (email === 'amco@gmx.es' && password === '533712') {
                messageDiv.style.display = 'block';
                messageDiv.style.backgroundColor = '#d4edda';
                messageDiv.style.color = '#155724';
                messageDiv.style.border = '1px solid #c3e6cb';
                messageDiv.innerHTML = '‚úÖ Acceso correcto como Super Administrador. Redirigiendo...';
                
                setTimeout(() => {
                    closeAdminModal();
                    window.open('admin-panel.html', '_blank');
                }, 1500);
            } 
            // Verificar credenciales del administrador principal
            else if (email === 'cdsanabriafc@gmail.com' && password === 'admin123') {
                messageDiv.style.display = 'block';
                messageDiv.style.backgroundColor = '#d4edda';
                messageDiv.style.color = '#155724';
                messageDiv.style.border = '1px solid #c3e6cb';
                messageDiv.innerHTML = '‚úÖ Acceso correcto como Administrador Principal. Redirigiendo...';
                
                setTimeout(() => {
                    closeAdminModal();
                    window.open('admin-panel.html', '_blank');
                }, 1500);
            }
            // Verificar credenciales del administrador fijo
            else if (email === 'administradores@sanabria.com' && password === 'admin12') {
                messageDiv.style.display = 'block';
                messageDiv.style.backgroundColor = '#d4edda';
                messageDiv.style.color = '#155724';
                messageDiv.style.border = '1px solid #c3e6cb';
                messageDiv.innerHTML = '‚úÖ Acceso correcto como Administrador del Sanabria. Redirigiendo...';
                
                setTimeout(() => {
                    closeAdminModal();
                    window.open('admin-panel.html', '_blank');
                }, 1500);
            } else {
                messageDiv.style.display = 'block';
                messageDiv.style.backgroundColor = '#f8d7da';
                messageDiv.style.color = '#721c24';
                messageDiv.style.border = '1px solid #f5c6cb';
                messageDiv.innerHTML = '‚ùå Credenciales incorrectas. Acceso denegado.';
            }
        }

        // Funci√≥n para cerrar sesi√≥n
        function logout() {
            // Limpiar todas las sesiones
            localStorage.removeItem('currentSocio');
            localStorage.removeItem('currentAmigo');
            localStorage.removeItem('currentCoach');
            
            // Limpiar sesiones recordadas
            sessionStorage.removeItem('rememberedSocio');
            sessionStorage.removeItem('rememberedAmigo');
            
            // Actualizar estado de login
            updateLoginStatus();
            
            alert('‚úÖ Sesi√≥n cerrada correctamente. Ahora eres un visitante.');
        }

        // ===== FUNCIONES PARA POL√çTICA DE PRIVACIDAD =====
        
        function togglePoliticaPrivacidad() {
            const politica = document.getElementById('politicaPrivacidad');
            if (politica.style.display === 'none') {
                politica.style.display = 'block';
            } else {
                politica.style.display = 'none';
            }
        }

        // Cerrar modal al hacer clic fuera de √©l
        window.onclick = function(event) {
            const modal = document.getElementById('adminModal');
            if (event.target === modal) {
                closeAdminModal();
            }
        }

        // Funci√≥n para actualizar el estado de login en la p√°gina
        function updateLoginStatus() {
            const userStatus = getUserStatus();
            const statusElement = document.getElementById('loginStatus');
            
            if (!statusElement) {
                // Crear elemento de estado si no existe
                const header = document.querySelector('header');
                if (header) {
                    const statusDiv = document.createElement('div');
                    statusDiv.id = 'loginStatus';
                    statusDiv.style.cssText = `
                        position: absolute;
                        top: 20px;
                        right: 20px;
                        background: rgba(255,255,255,0.9);
                        padding: 8px 16px;
                        border-radius: 20px;
                        font-size: 0.9rem;
                        font-weight: bold;
                        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                        z-index: 100;
                        display: flex;
                        align-items: center;
                        gap: 10px;
                    `;
                    header.style.position = 'relative';
                    header.appendChild(statusDiv);
                }
            }
            
            const statusDiv = document.getElementById('loginStatus');
            if (statusDiv) {
                const statusConfig = {
                    'visitante': { text: 'üë§ Visitante', color: '#6b7280', bg: '#f3f4f6' },
                    'socio': { text: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Socio', color: '#dc2626', bg: '#fef2f2' },
                    'amigo': { text: 'ü§ù Amigo del Club', color: '#3b82f6', bg: '#eff6ff' },
                    'entrenador': { text: 'üë®‚Äçüè´ Entrenador', color: '#059669', bg: '#f0fdf4' }
                };
                
                const config = statusConfig[userStatus] || statusConfig['visitante'];
                
                // Crear contenido del estado
                let statusContent = `<span>${config.text}</span>`;
                
                // Agregar bot√≥n de cerrar sesi√≥n si no es visitante
                if (userStatus !== 'visitante') {
                    statusContent += `<button onclick="logout()" style="background: #dc2626; color: white; border: none; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem; cursor: pointer; margin-left: 8px;">üö™</button>`;
                }
                
                statusDiv.innerHTML = statusContent;
                statusDiv.style.color = config.color;
                statusDiv.style.background = config.bg;
                statusDiv.style.border = `2px solid ${config.color}`;
            }
        }

        // Funci√≥n para verificar sesi√≥n recordada y actualizar datos
        function checkRememberedSession() {
            // Verificar si hay una sesi√≥n de socio recordada
            const rememberedSocio = sessionStorage.getItem('rememberedSocio');
            if (rememberedSocio) {
                try {
                    const socioData = JSON.parse(rememberedSocio);
                    if (socioData.rememberSession) {
                        // Verificar si los datos del socio han sido actualizados
                        const currentSocios = JSON.parse(localStorage.getItem('clubMembers') || '[]');
                        const updatedSocio = currentSocios.find(s => s.email === socioData.email);
                        
                        if (updatedSocio) {
                            // Actualizar la sesi√≥n con los datos m√°s recientes
                            const updatedSessionData = {
                                ...updatedSocio,
                                loginTime: socioData.loginTime,
                                rememberSession: true
                            };
                            
                            localStorage.setItem('currentSocio', JSON.stringify(updatedSessionData));
                            sessionStorage.setItem('rememberedSocio', JSON.stringify(updatedSessionData));
                            console.log('‚úÖ Sesi√≥n de socio restaurada y actualizada autom√°ticamente');
                        } else {
                            // Si el socio ya no existe, limpiar la sesi√≥n
                            sessionStorage.removeItem('rememberedSocio');
                            console.log('‚ö†Ô∏è Sesi√≥n de socio eliminada - usuario no encontrado');
                        }
                    }
                } catch (error) {
                    console.error('‚ùå Error al restaurar sesi√≥n de socio:', error);
                    sessionStorage.removeItem('rememberedSocio');
                }
            }
            
            // Verificar si hay una sesi√≥n de amigo recordada
            const rememberedAmigo = sessionStorage.getItem('rememberedAmigo');
            if (rememberedAmigo) {
                try {
                    const amigoData = JSON.parse(rememberedAmigo);
                    if (amigoData.rememberSession) {
                        // Verificar si los datos del amigo han sido actualizados
                        const currentAmigos = JSON.parse(localStorage.getItem('clubFriends') || '[]');
                        const updatedAmigo = currentAmigos.find(a => a.email === amigoData.email);
                        
                        if (updatedAmigo) {
                            // Actualizar la sesi√≥n con los datos m√°s recientes
                            const updatedSessionData = {
                                ...updatedAmigo,
                                loginTime: amigoData.loginTime,
                                rememberSession: true
                            };
                            
                            localStorage.setItem('currentAmigo', JSON.stringify(updatedSessionData));
                            sessionStorage.setItem('rememberedAmigo', JSON.stringify(updatedSessionData));
                            console.log('‚úÖ Sesi√≥n de amigo restaurada y actualizada autom√°ticamente');
                        } else {
                            // Si el amigo ya no existe, limpiar la sesi√≥n
                            sessionStorage.removeItem('rememberedAmigo');
                            console.log('‚ö†Ô∏è Sesi√≥n de amigo eliminada - usuario no encontrado');
                        }
                    }
                } catch (error) {
                    console.error('‚ùå Error al restaurar sesi√≥n de amigo:', error);
                    sessionStorage.removeItem('rememberedAmigo');
                }
            }
        }

        // Funci√≥n para sincronizar datos con la web
        function syncDataWithWeb() {
            try {
                // Obtener todos los datos del localStorage
                const syncData = {
                    timestamp: new Date().toISOString(),
                    clubMembers: JSON.parse(localStorage.getItem('clubMembers') || '[]'),
                    clubFriends: JSON.parse(localStorage.getItem('clubFriends') || '[]'),
                    clubTeams: JSON.parse(localStorage.getItem('clubTeams') || '[]'),
                    clubPlayers: JSON.parse(localStorage.getItem('clubPlayers') || '[]'),
                    clubEvents: JSON.parse(localStorage.getItem('clubEvents') || '[]'),
                    clubDocuments: JSON.parse(localStorage.getItem('clubDocuments') || '[]'),
                    clubPhotos: JSON.parse(localStorage.getItem('clubPhotos') || '[]'),
                    clubVideos: JSON.parse(localStorage.getItem('clubVideos') || '[]'),
                    encuentros: JSON.parse(localStorage.getItem('encuentros') || '[]'),
                    currentSocio: localStorage.getItem('currentSocio'),
                    currentAmigo: localStorage.getItem('currentAmigo'),
                    currentCoach: localStorage.getItem('currentCoach')
                };
                
                // Guardar datos de sincronizaci√≥n
                localStorage.setItem('syncData', JSON.stringify(syncData));
                
                // Enviar evento de sincronizaci√≥n a la web si es posible
                if (window.parent && window.parent !== window) {
                    window.parent.postMessage({
                        type: 'SYNC_DATA',
                        data: syncData
                    }, '*');
                }
                
                console.log('üîÑ Datos sincronizados desde la app:', syncData.timestamp);
                
            } catch (error) {
                console.error('‚ùå Error en sincronizaci√≥n desde app:', error);
            }
        }

        // Funci√≥n para actualizar todos los datos de la p√°gina
        function updatePageData() {
            // Sincronizar datos con la web
            syncDataWithWeb();
            
            // Actualizar contadores de encuentros
            const encuentros = JSON.parse(localStorage.getItem('encuentros') || '[]');
            if (encuentros.length > 0) {
                const calendarCard = document.querySelector('.feature-card:nth-child(2)');
                if (calendarCard) {
                    const title = calendarCard.querySelector('.feature-title');
                    if (title && title.textContent.includes('Partidos y Calendario')) {
                        title.innerHTML = `Partidos y Calendario <span style="background: #f59e0b; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem; margin-left: 10px;">${encuentros.length}</span>`;
                    }
                }
            }
            
            // Actualizar contadores de socios
            const socios = JSON.parse(localStorage.getItem('clubMembers') || '[]');
            const sociosActivos = socios.filter(s => s.status === 'active').length;
            const sociosPendientes = socios.filter(s => s.status === 'pending_validation').length;
            
            // Actualizar contadores de amigos
            const amigos = JSON.parse(localStorage.getItem('clubFriends') || '[]');
            const amigosActivos = amigos.filter(a => a.status === 'active').length;
            
            // Actualizar contadores de equipos
            const equipos = JSON.parse(localStorage.getItem('clubTeams') || '[]');
            const jugadores = JSON.parse(localStorage.getItem('clubPlayers') || '[]');
            
            // Actualizar contadores de eventos
            const eventos = JSON.parse(localStorage.getItem('clubEvents') || '[]');
            const eventosActivos = eventos.filter(e => e.status === 'active').length;
            
            // Actualizar contadores de documentos
            const documentos = JSON.parse(localStorage.getItem('clubDocuments') || '[]');
            const documentosActivos = documentos.filter(d => d.status === 'active').length;
            
            // Actualizar contadores de multimedia
            const fotos = JSON.parse(localStorage.getItem('clubPhotos') || '[]');
            const videos = JSON.parse(localStorage.getItem('clubVideos') || '[]');
            
            console.log('‚úÖ Datos de la app actualizados:', {
                encuentros: encuentros.length,
                socios: sociosActivos + sociosPendientes,
                sociosActivos,
                sociosPendientes,
                amigos: amigosActivos,
                equipos: equipos.length,
                jugadores: jugadores.length,
                eventos: eventosActivos,
                documentos: documentosActivos,
                multimedia: fotos.length + videos.length
            });
        }

        // Cargar encuentros al iniciar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar sesi√≥n recordada al cargar la p√°gina
            checkRememberedSession();
            
            // Actualizar todos los datos de la p√°gina
            updatePageData();
            
            // Actualizar estado de login
            updateLoginStatus();
            
            // Configurar actualizaci√≥n autom√°tica cada 30 segundos
            setInterval(function() {
                updatePageData();
            }, 30000); // 30 segundos
            
            // Inicializar aplicaci√≥n y verificar formularios
            inicializarAplicacion();
            
            console.log('üîÑ Sistema de actualizaci√≥n autom√°tica activado en la app');
        });

    </script>
</body>
</html> 